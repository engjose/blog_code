<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SUPER-JOSE-大叔的技术博客</title>
  <subtitle>There is no shortcut is a permanent shortcut</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.fireworm.online/"/>
  <updated>2017-06-06T13:29:11.000Z</updated>
  <id>http://www.fireworm.online/</id>
  
  <author>
    <name>SUPER-JOSE</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>电商实战(五)---数据库设计</title>
    <link href="http://www.fireworm.online/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2017/06/06/%E7%94%B5%E5%95%86%E5%AE%9E%E6%88%98-%E4%BA%94-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.html"/>
    <id>http://www.fireworm.online/项目实战/2017/06/06/电商实战-五-数据库设计.html</id>
    <published>2017-06-06T13:29:11.000Z</published>
    <updated>2017-06-06T13:29:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h3><h4 id="数据表结构"><a href="#数据表结构" class="headerlink" title="数据表结构"></a><font color="blue">数据表结构</font></h4><p><img src="http://oayt7zau6.bkt.clouddn.com/sql_struct.jpg" alt="enter image description here"></p>
<h4 id="建表语句"><a href="#建表语句" class="headerlink" title="建表语句"></a><font color="blue">建表语句</font></h4><p>1.user表<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_user`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'用户表id'</span>,</div><div class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户名'</span>,</div><div class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户密码，MD5加密'</span>,</div><div class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`phone`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`question`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'找回密码问题'</span>,</div><div class="line">  <span class="string">`answer`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'找回密码答案'</span>,</div><div class="line">  <span class="string">`role`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'角色0-管理员,1-普通用户'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'最后一次更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`user_name_unique`</span> (<span class="string">`username`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">22</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<p>2.分类表category<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_category`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'类别Id'</span>,</div><div class="line">  <span class="string">`parent_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'父类别id当id=0时说明是根节点,一级类别'</span>,</div><div class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'类别名称'</span>,</div><div class="line">  <span class="string">`status`</span> tinyint(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'类别状态1-正常,2-已废弃'</span>,</div><div class="line">  <span class="string">`sort_order`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'排序编号,同类展示顺序,数值相等则自然排序'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">100032</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<p>3.产品表product<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_product`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'商品id'</span>,</div><div class="line">  <span class="string">`category_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'分类id,对应mmall_category表的主键'</span>,</div><div class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品名称'</span>,</div><div class="line">  <span class="string">`subtitle`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品副标题'</span>,</div><div class="line">  <span class="string">`main_image`</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'产品主图,url相对地址'</span>,</div><div class="line">  <span class="string">`sub_images`</span> <span class="built_in">text</span> <span class="keyword">COMMENT</span> <span class="string">'图片地址,json格式,扩展用'</span>,</div><div class="line">  <span class="string">`detail`</span> <span class="built_in">text</span> <span class="keyword">COMMENT</span> <span class="string">'商品详情'</span>,</div><div class="line">  <span class="string">`price`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'价格,单位-元保留两位小数'</span>,</div><div class="line">  <span class="string">`stock`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'库存数量'</span>,</div><div class="line">  <span class="string">`status`</span> <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'商品状态.1-在售 2-下架 3-删除'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">30</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<p>4.收货地址表shipping<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_shipping`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</div><div class="line">  <span class="string">`receiver_name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'收货姓名'</span>,</div><div class="line">  <span class="string">`receiver_phone`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'收货固定电话'</span>,</div><div class="line">  <span class="string">`receiver_mobile`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'收货移动电话'</span>,</div><div class="line">  <span class="string">`receiver_province`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'省份'</span>,</div><div class="line">  <span class="string">`receiver_city`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'城市'</span>,</div><div class="line">  <span class="string">`receiver_district`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'区/县'</span>,</div><div class="line">  <span class="string">`receiver_address`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'详细地址'</span>,</div><div class="line">  <span class="string">`receiver_zip`</span> <span class="built_in">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮编'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">33</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<p>5.购物车表:cart<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_cart`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`product_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品id'</span>,</div><div class="line">  <span class="string">`quantity`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'数量'</span>,</div><div class="line">  <span class="string">`checked`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'是否选择,1=已勾选,0=未勾选'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">KEY</span> <span class="string">`user_id_index`</span> (<span class="string">`user_id`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">146</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<p>6.订单表order<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_order`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'订单id'</span>,</div><div class="line">  <span class="string">`order_no`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单号'</span>,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</div><div class="line">  <span class="string">`shipping_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`payment`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'实际付款金额,单位是元,保留两位小数'</span>,</div><div class="line">  <span class="string">`payment_type`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付类型,1-在线支付'</span>,</div><div class="line">  <span class="string">`postage`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'运费,单位是元'</span>,</div><div class="line">  <span class="string">`status`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单状态:0-已取消-10-未付款，20-已付款，40-已发货，50-交易成功，60-交易关闭'</span>,</div><div class="line">  <span class="string">`payment_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付时间'</span>,</div><div class="line">  <span class="string">`send_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'发货时间'</span>,</div><div class="line">  <span class="string">`end_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'交易完成时间'</span>,</div><div class="line">  <span class="string">`close_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'交易关闭时间'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`order_no_index`</span> (<span class="string">`order_no`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">118</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<p>7.订单明细表order_item<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_order_item`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'订单子表id'</span>,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`order_no`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`product_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品id'</span>,</div><div class="line">  <span class="string">`product_name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品名称'</span>,</div><div class="line">  <span class="string">`product_image`</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品图片地址'</span>,</div><div class="line">  <span class="string">`current_unit_price`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'生成订单时的商品单价，单位是元,保留两位小数'</span>,</div><div class="line">  <span class="string">`quantity`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品数量'</span>,</div><div class="line">  <span class="string">`total_price`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品总价,单位是元,保留两位小数'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">KEY</span> <span class="string">`order_no_index`</span> (<span class="string">`order_no`</span>) <span class="keyword">USING</span> BTREE,</div><div class="line">  <span class="keyword">KEY</span> <span class="string">`order_no_user_id_index`</span> (<span class="string">`user_id`</span>,<span class="string">`order_no`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">135</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<p>8.支付信息表pay_info<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_pay_info`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</div><div class="line">  <span class="string">`order_no`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单号'</span>,</div><div class="line">  <span class="string">`pay_platform`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付平台:1-支付宝,2-微信'</span>,</div><div class="line">  <span class="string">`platform_number`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付宝支付流水号'</span>,</div><div class="line">  <span class="string">`platform_status`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付宝支付状态'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">61</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</div></pre></td></tr></table></figure></p>
<h4 id="SQL导入"><a href="#SQL导入" class="headerlink" title="SQL导入"></a><font color="blue">SQL导入</font></h4><p>利用Navicat导入sql文件<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> Navicat Premium Data Transfer</div><div class="line"></div><div class="line"> Source Server         : 182.92.82.103</div><div class="line"> Source Server Type    : MySQL</div><div class="line"> Source Server Version : 50173</div><div class="line"> Source Host           : 182.92.82.103</div><div class="line"> Source Database       : mmall</div><div class="line"></div><div class="line"> Target Server Type    : MySQL</div><div class="line"> Target Server Version : 50173</div><div class="line"> File Encoding         : utf-8</div><div class="line"></div><div class="line"> Date: 04/13/2017 22:04:18 PM</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</div><div class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_cart`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_cart`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_cart`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`product_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品id'</span>,</div><div class="line">  <span class="string">`quantity`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'数量'</span>,</div><div class="line">  <span class="string">`checked`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'是否选择,1=已勾选,0=未勾选'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">KEY</span> <span class="string">`user_id_index`</span> (<span class="string">`user_id`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">146</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_cart`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_cart`</span> <span class="keyword">VALUES</span> (<span class="string">'126'</span>, <span class="string">'21'</span>, <span class="string">'26'</span>, <span class="string">'1'</span>, <span class="string">'1'</span>, <span class="string">'2017-04-13 21:27:06'</span>, <span class="string">'2017-04-13 21:27:06'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_category`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_category`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_category`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'类别Id'</span>,</div><div class="line">  <span class="string">`parent_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'父类别id当id=0时说明是根节点,一级类别'</span>,</div><div class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'类别名称'</span>,</div><div class="line">  <span class="string">`status`</span> tinyint(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'类别状态1-正常,2-已废弃'</span>,</div><div class="line">  <span class="string">`sort_order`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'排序编号,同类展示顺序,数值相等则自然排序'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">100032</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_category`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_category`</span> <span class="keyword">VALUES</span> (<span class="string">'100001'</span>, <span class="string">'0'</span>, <span class="string">'家用电器'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:46:00'</span>, <span class="string">'2017-03-25 16:46:00'</span>), (<span class="string">'100002'</span>, <span class="string">'0'</span>, <span class="string">'数码3C'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:46:21'</span>, <span class="string">'2017-03-25 16:46:21'</span>), (<span class="string">'100003'</span>, <span class="string">'0'</span>, <span class="string">'服装箱包'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:49:53'</span>, <span class="string">'2017-03-25 16:49:53'</span>), (<span class="string">'100004'</span>, <span class="string">'0'</span>, <span class="string">'食品生鲜'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:50:19'</span>, <span class="string">'2017-03-25 16:50:19'</span>), (<span class="string">'100005'</span>, <span class="string">'0'</span>, <span class="string">'酒水饮料'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:50:29'</span>, <span class="string">'2017-03-25 16:50:29'</span>), (<span class="string">'100006'</span>, <span class="string">'100001'</span>, <span class="string">'冰箱'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:52:15'</span>, <span class="string">'2017-03-25 16:52:15'</span>), (<span class="string">'100007'</span>, <span class="string">'100001'</span>, <span class="string">'电视'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:52:26'</span>, <span class="string">'2017-03-25 16:52:26'</span>), (<span class="string">'100008'</span>, <span class="string">'100001'</span>, <span class="string">'洗衣机'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:52:39'</span>, <span class="string">'2017-03-25 16:52:39'</span>), (<span class="string">'100009'</span>, <span class="string">'100001'</span>, <span class="string">'空调'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:52:45'</span>, <span class="string">'2017-03-25 16:52:45'</span>), (<span class="string">'100010'</span>, <span class="string">'100001'</span>, <span class="string">'电热水器'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:52:54'</span>, <span class="string">'2017-03-25 16:52:54'</span>), (<span class="string">'100011'</span>, <span class="string">'100002'</span>, <span class="string">'电脑'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:53:18'</span>, <span class="string">'2017-03-25 16:53:18'</span>), (<span class="string">'100012'</span>, <span class="string">'100002'</span>, <span class="string">'手机'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:53:27'</span>, <span class="string">'2017-03-25 16:53:27'</span>), (<span class="string">'100013'</span>, <span class="string">'100002'</span>, <span class="string">'平板电脑'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:53:35'</span>, <span class="string">'2017-03-25 16:53:35'</span>), (<span class="string">'100014'</span>, <span class="string">'100002'</span>, <span class="string">'数码相机'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:53:56'</span>, <span class="string">'2017-03-25 16:53:56'</span>), (<span class="string">'100015'</span>, <span class="string">'100002'</span>, <span class="string">'3C配件'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:54:07'</span>, <span class="string">'2017-03-25 16:54:07'</span>), (<span class="string">'100016'</span>, <span class="string">'100003'</span>, <span class="string">'女装'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:54:44'</span>, <span class="string">'2017-03-25 16:54:44'</span>), (<span class="string">'100017'</span>, <span class="string">'100003'</span>, <span class="string">'帽子'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:54:51'</span>, <span class="string">'2017-03-25 16:54:51'</span>), (<span class="string">'100018'</span>, <span class="string">'100003'</span>, <span class="string">'旅行箱'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:55:02'</span>, <span class="string">'2017-03-25 16:55:02'</span>), (<span class="string">'100019'</span>, <span class="string">'100003'</span>, <span class="string">'手提包'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:55:09'</span>, <span class="string">'2017-03-25 16:55:09'</span>), (<span class="string">'100020'</span>, <span class="string">'100003'</span>, <span class="string">'保暖内衣'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:55:18'</span>, <span class="string">'2017-03-25 16:55:18'</span>), (<span class="string">'100021'</span>, <span class="string">'100004'</span>, <span class="string">'零食'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:55:30'</span>, <span class="string">'2017-03-25 16:55:30'</span>), (<span class="string">'100022'</span>, <span class="string">'100004'</span>, <span class="string">'生鲜'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:55:37'</span>, <span class="string">'2017-03-25 16:55:37'</span>), (<span class="string">'100023'</span>, <span class="string">'100004'</span>, <span class="string">'半成品菜'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:55:47'</span>, <span class="string">'2017-03-25 16:55:47'</span>), (<span class="string">'100024'</span>, <span class="string">'100004'</span>, <span class="string">'速冻食品'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:55:56'</span>, <span class="string">'2017-03-25 16:55:56'</span>), (<span class="string">'100025'</span>, <span class="string">'100004'</span>, <span class="string">'进口食品'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:56:06'</span>, <span class="string">'2017-03-25 16:56:06'</span>), (<span class="string">'100026'</span>, <span class="string">'100005'</span>, <span class="string">'白酒'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:56:22'</span>, <span class="string">'2017-03-25 16:56:22'</span>), (<span class="string">'100027'</span>, <span class="string">'100005'</span>, <span class="string">'红酒'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:56:30'</span>, <span class="string">'2017-03-25 16:56:30'</span>), (<span class="string">'100028'</span>, <span class="string">'100005'</span>, <span class="string">'饮料'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:56:37'</span>, <span class="string">'2017-03-25 16:56:37'</span>), (<span class="string">'100029'</span>, <span class="string">'100005'</span>, <span class="string">'调制鸡尾酒'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:56:45'</span>, <span class="string">'2017-03-25 16:56:45'</span>), (<span class="string">'100030'</span>, <span class="string">'100005'</span>, <span class="string">'进口洋酒'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-03-25 16:57:05'</span>, <span class="string">'2017-03-25 16:57:05'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_order`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_order`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_order`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'订单id'</span>,</div><div class="line">  <span class="string">`order_no`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单号'</span>,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</div><div class="line">  <span class="string">`shipping_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`payment`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'实际付款金额,单位是元,保留两位小数'</span>,</div><div class="line">  <span class="string">`payment_type`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付类型,1-在线支付'</span>,</div><div class="line">  <span class="string">`postage`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'运费,单位是元'</span>,</div><div class="line">  <span class="string">`status`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单状态:0-已取消-10-未付款，20-已付款，40-已发货，50-交易成功，60-交易关闭'</span>,</div><div class="line">  <span class="string">`payment_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付时间'</span>,</div><div class="line">  <span class="string">`send_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'发货时间'</span>,</div><div class="line">  <span class="string">`end_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'交易完成时间'</span>,</div><div class="line">  <span class="string">`close_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'交易关闭时间'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`order_no_index`</span> (<span class="string">`order_no`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">118</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_order`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_order`</span> <span class="keyword">VALUES</span> (<span class="string">'103'</span>, <span class="string">'1491753014256'</span>, <span class="string">'1'</span>, <span class="string">'25'</span>, <span class="string">'13998.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-09 23:50:14'</span>, <span class="string">'2017-04-09 23:50:14'</span>), (<span class="string">'104'</span>, <span class="string">'1491830695216'</span>, <span class="string">'1'</span>, <span class="string">'26'</span>, <span class="string">'13998.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-10 21:24:55'</span>, <span class="string">'2017-04-10 21:24:55'</span>), (<span class="string">'105'</span>, <span class="string">'1492089528889'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:18:48'</span>, <span class="string">'2017-04-13 21:18:48'</span>), (<span class="string">'106'</span>, <span class="string">'1492090946105'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'27894.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'20'</span>, <span class="string">'2017-04-13 21:42:40'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:42:26'</span>, <span class="string">'2017-04-13 21:42:41'</span>), (<span class="string">'107'</span>, <span class="string">'1492091003128'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'8597.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'20'</span>, <span class="string">'2017-04-13 21:43:38'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:43:23'</span>, <span class="string">'2017-04-13 21:43:38'</span>), (<span class="string">'108'</span>, <span class="string">'1492091051313'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'1999.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:44:11'</span>, <span class="string">'2017-04-13 21:44:11'</span>), (<span class="string">'109'</span>, <span class="string">'1492091061513'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'6598.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:44:21'</span>, <span class="string">'2017-04-13 21:44:21'</span>), (<span class="string">'110'</span>, <span class="string">'1492091069563'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:44:29'</span>, <span class="string">'2017-04-13 21:44:29'</span>), (<span class="string">'111'</span>, <span class="string">'1492091076073'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'4299.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:44:36'</span>, <span class="string">'2017-04-13 21:44:36'</span>), (<span class="string">'112'</span>, <span class="string">'1492091083720'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:44:43'</span>, <span class="string">'2017-04-13 21:44:43'</span>), (<span class="string">'113'</span>, <span class="string">'1492091089794'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'6999.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:44:49'</span>, <span class="string">'2017-04-13 21:44:49'</span>), (<span class="string">'114'</span>, <span class="string">'1492091096400'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'6598.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:44:56'</span>, <span class="string">'2017-04-13 21:44:56'</span>), (<span class="string">'115'</span>, <span class="string">'1492091102371'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'10'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:45:02'</span>, <span class="string">'2017-04-13 21:45:02'</span>), (<span class="string">'116'</span>, <span class="string">'1492091110004'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'8598.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'40'</span>, <span class="string">'2017-04-13 21:55:16'</span>, <span class="string">'2017-04-13 21:55:31'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:45:09'</span>, <span class="string">'2017-04-13 21:55:31'</span>), (<span class="string">'117'</span>, <span class="string">'1492091141269'</span>, <span class="string">'1'</span>, <span class="string">'29'</span>, <span class="string">'22894.00'</span>, <span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'20'</span>, <span class="string">'2017-04-13 21:46:06'</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:45:41'</span>, <span class="string">'2017-04-13 21:46:07'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_order_item`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_order_item`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_order_item`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'订单子表id'</span>,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`order_no`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`product_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品id'</span>,</div><div class="line">  <span class="string">`product_name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品名称'</span>,</div><div class="line">  <span class="string">`product_image`</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品图片地址'</span>,</div><div class="line">  <span class="string">`current_unit_price`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'生成订单时的商品单价，单位是元,保留两位小数'</span>,</div><div class="line">  <span class="string">`quantity`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品数量'</span>,</div><div class="line">  <span class="string">`total_price`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品总价,单位是元,保留两位小数'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">KEY</span> <span class="string">`order_no_index`</span> (<span class="string">`order_no`</span>) <span class="keyword">USING</span> BTREE,</div><div class="line">  <span class="keyword">KEY</span> <span class="string">`order_no_user_id_index`</span> (<span class="string">`user_id`</span>,<span class="string">`order_no`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">135</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_order_item`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_order_item`</span> <span class="keyword">VALUES</span> (<span class="string">'113'</span>, <span class="string">'1'</span>, <span class="string">'1491753014256'</span>, <span class="string">'26'</span>, <span class="string">'Apple iPhone 7 Plus (A1661) 128G 玫瑰金色 移动联通电信4G手机'</span>, <span class="string">'241997c4-9e62-4824-b7f0-7425c3c28917.jpeg'</span>, <span class="string">'6999.00'</span>, <span class="string">'2'</span>, <span class="string">'13998.00'</span>, <span class="string">'2017-04-09 23:50:14'</span>, <span class="string">'2017-04-09 23:50:14'</span>), (<span class="string">'114'</span>, <span class="string">'1'</span>, <span class="string">'1491830695216'</span>, <span class="string">'26'</span>, <span class="string">'Apple iPhone 7 Plus (A1661) 128G 玫瑰金色 移动联通电信4G手机'</span>, <span class="string">'241997c4-9e62-4824-b7f0-7425c3c28917.jpeg'</span>, <span class="string">'6999.00'</span>, <span class="string">'2'</span>, <span class="string">'13998.00'</span>, <span class="string">'2017-04-10 21:24:55'</span>, <span class="string">'2017-04-10 21:24:55'</span>), (<span class="string">'115'</span>, <span class="string">'1'</span>, <span class="string">'1492089528889'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'3299.00'</span>, <span class="string">'2017-04-13 21:18:48'</span>, <span class="string">'2017-04-13 21:18:48'</span>), (<span class="string">'116'</span>, <span class="string">'1'</span>, <span class="string">'1492090946105'</span>, <span class="string">'29'</span>, <span class="string">'Haier/海尔HJ100-1HU1 10公斤滚筒洗衣机全自动带烘干家用大容量 洗烘一体'</span>, <span class="string">'173335a4-5dce-4afd-9f18-a10623724c4e.jpeg'</span>, <span class="string">'4299.00'</span>, <span class="string">'2'</span>, <span class="string">'8598.00'</span>, <span class="string">'2017-04-13 21:42:26'</span>, <span class="string">'2017-04-13 21:42:26'</span>), (<span class="string">'117'</span>, <span class="string">'1'</span>, <span class="string">'1492090946105'</span>, <span class="string">'28'</span>, <span class="string">'4+64G送手环/Huawei/华为 nova 手机P9/P10plus青春'</span>, <span class="string">'0093f5d3-bdb4-4fb0-bec5-5465dfd26363.jpeg'</span>, <span class="string">'1999.00'</span>, <span class="string">'1'</span>, <span class="string">'1999.00'</span>, <span class="string">'2017-04-13 21:42:26'</span>, <span class="string">'2017-04-13 21:42:26'</span>), (<span class="string">'118'</span>, <span class="string">'1'</span>, <span class="string">'1492090946105'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'3299.00'</span>, <span class="string">'2017-04-13 21:42:26'</span>, <span class="string">'2017-04-13 21:42:26'</span>), (<span class="string">'119'</span>, <span class="string">'1'</span>, <span class="string">'1492090946105'</span>, <span class="string">'26'</span>, <span class="string">'Apple iPhone 7 Plus (A1661) 128G 玫瑰金色 移动联通电信4G手机'</span>, <span class="string">'241997c4-9e62-4824-b7f0-7425c3c28917.jpeg'</span>, <span class="string">'6999.00'</span>, <span class="string">'2'</span>, <span class="string">'13998.00'</span>, <span class="string">'2017-04-13 21:42:26'</span>, <span class="string">'2017-04-13 21:42:26'</span>), (<span class="string">'120'</span>, <span class="string">'1'</span>, <span class="string">'1492091003128'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'2'</span>, <span class="string">'6598.00'</span>, <span class="string">'2017-04-13 21:43:23'</span>, <span class="string">'2017-04-13 21:43:23'</span>), (<span class="string">'121'</span>, <span class="string">'1'</span>, <span class="string">'1492091003128'</span>, <span class="string">'28'</span>, <span class="string">'4+64G送手环/Huawei/华为 nova 手机P9/P10plus青春'</span>, <span class="string">'0093f5d3-bdb4-4fb0-bec5-5465dfd26363.jpeg'</span>, <span class="string">'1999.00'</span>, <span class="string">'1'</span>, <span class="string">'1999.00'</span>, <span class="string">'2017-04-13 21:43:23'</span>, <span class="string">'2017-04-13 21:43:23'</span>), (<span class="string">'122'</span>, <span class="string">'1'</span>, <span class="string">'1492091051313'</span>, <span class="string">'28'</span>, <span class="string">'4+64G送手环/Huawei/华为 nova 手机P9/P10plus青春'</span>, <span class="string">'0093f5d3-bdb4-4fb0-bec5-5465dfd26363.jpeg'</span>, <span class="string">'1999.00'</span>, <span class="string">'1'</span>, <span class="string">'1999.00'</span>, <span class="string">'2017-04-13 21:44:11'</span>, <span class="string">'2017-04-13 21:44:11'</span>), (<span class="string">'123'</span>, <span class="string">'1'</span>, <span class="string">'1492091061513'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'2'</span>, <span class="string">'6598.00'</span>, <span class="string">'2017-04-13 21:44:21'</span>, <span class="string">'2017-04-13 21:44:21'</span>), (<span class="string">'124'</span>, <span class="string">'1'</span>, <span class="string">'1492091069563'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'3299.00'</span>, <span class="string">'2017-04-13 21:44:29'</span>, <span class="string">'2017-04-13 21:44:29'</span>), (<span class="string">'125'</span>, <span class="string">'1'</span>, <span class="string">'1492091076073'</span>, <span class="string">'29'</span>, <span class="string">'Haier/海尔HJ100-1HU1 10公斤滚筒洗衣机全自动带烘干家用大容量 洗烘一体'</span>, <span class="string">'173335a4-5dce-4afd-9f18-a10623724c4e.jpeg'</span>, <span class="string">'4299.00'</span>, <span class="string">'1'</span>, <span class="string">'4299.00'</span>, <span class="string">'2017-04-13 21:44:36'</span>, <span class="string">'2017-04-13 21:44:36'</span>), (<span class="string">'126'</span>, <span class="string">'1'</span>, <span class="string">'1492091083720'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'3299.00'</span>, <span class="string">'2017-04-13 21:44:43'</span>, <span class="string">'2017-04-13 21:44:43'</span>), (<span class="string">'127'</span>, <span class="string">'1'</span>, <span class="string">'1492091089794'</span>, <span class="string">'26'</span>, <span class="string">'Apple iPhone 7 Plus (A1661) 128G 玫瑰金色 移动联通电信4G手机'</span>, <span class="string">'241997c4-9e62-4824-b7f0-7425c3c28917.jpeg'</span>, <span class="string">'6999.00'</span>, <span class="string">'1'</span>, <span class="string">'6999.00'</span>, <span class="string">'2017-04-13 21:44:49'</span>, <span class="string">'2017-04-13 21:44:49'</span>), (<span class="string">'128'</span>, <span class="string">'1'</span>, <span class="string">'1492091096400'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'2'</span>, <span class="string">'6598.00'</span>, <span class="string">'2017-04-13 21:44:56'</span>, <span class="string">'2017-04-13 21:44:56'</span>), (<span class="string">'129'</span>, <span class="string">'1'</span>, <span class="string">'1492091102371'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'3299.00'</span>, <span class="string">'2017-04-13 21:45:02'</span>, <span class="string">'2017-04-13 21:45:02'</span>), (<span class="string">'130'</span>, <span class="string">'1'</span>, <span class="string">'1492091110004'</span>, <span class="string">'29'</span>, <span class="string">'Haier/海尔HJ100-1HU1 10公斤滚筒洗衣机全自动带烘干家用大容量 洗烘一体'</span>, <span class="string">'173335a4-5dce-4afd-9f18-a10623724c4e.jpeg'</span>, <span class="string">'4299.00'</span>, <span class="string">'2'</span>, <span class="string">'8598.00'</span>, <span class="string">'2017-04-13 21:45:09'</span>, <span class="string">'2017-04-13 21:45:09'</span>), (<span class="string">'131'</span>, <span class="string">'1'</span>, <span class="string">'1492091141269'</span>, <span class="string">'26'</span>, <span class="string">'Apple iPhone 7 Plus (A1661) 128G 玫瑰金色 移动联通电信4G手机'</span>, <span class="string">'241997c4-9e62-4824-b7f0-7425c3c28917.jpeg'</span>, <span class="string">'6999.00'</span>, <span class="string">'1'</span>, <span class="string">'6999.00'</span>, <span class="string">'2017-04-13 21:45:41'</span>, <span class="string">'2017-04-13 21:45:41'</span>), (<span class="string">'132'</span>, <span class="string">'1'</span>, <span class="string">'1492091141269'</span>, <span class="string">'27'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'3299.00'</span>, <span class="string">'1'</span>, <span class="string">'3299.00'</span>, <span class="string">'2017-04-13 21:45:41'</span>, <span class="string">'2017-04-13 21:45:41'</span>), (<span class="string">'133'</span>, <span class="string">'1'</span>, <span class="string">'1492091141269'</span>, <span class="string">'29'</span>, <span class="string">'Haier/海尔HJ100-1HU1 10公斤滚筒洗衣机全自动带烘干家用大容量 洗烘一体'</span>, <span class="string">'173335a4-5dce-4afd-9f18-a10623724c4e.jpeg'</span>, <span class="string">'4299.00'</span>, <span class="string">'2'</span>, <span class="string">'8598.00'</span>, <span class="string">'2017-04-13 21:45:41'</span>, <span class="string">'2017-04-13 21:45:41'</span>), (<span class="string">'134'</span>, <span class="string">'1'</span>, <span class="string">'1492091141269'</span>, <span class="string">'28'</span>, <span class="string">'4+64G送手环/Huawei/华为 nova 手机P9/P10plus青春'</span>, <span class="string">'0093f5d3-bdb4-4fb0-bec5-5465dfd26363.jpeg'</span>, <span class="string">'1999.00'</span>, <span class="string">'2'</span>, <span class="string">'3998.00'</span>, <span class="string">'2017-04-13 21:45:41'</span>, <span class="string">'2017-04-13 21:45:41'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_pay_info`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_pay_info`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_pay_info`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</div><div class="line">  <span class="string">`order_no`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'订单号'</span>,</div><div class="line">  <span class="string">`pay_platform`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付平台:1-支付宝,2-微信'</span>,</div><div class="line">  <span class="string">`platform_number`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付宝支付流水号'</span>,</div><div class="line">  <span class="string">`platform_status`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'支付宝支付状态'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">61</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_pay_info`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_pay_info`</span> <span class="keyword">VALUES</span> (<span class="string">'53'</span>, <span class="string">'1'</span>, <span class="string">'1492090946105'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116250'</span>, <span class="string">'WAIT_BUYER_PAY'</span>, <span class="string">'2017-04-13 21:42:33'</span>, <span class="string">'2017-04-13 21:42:33'</span>), (<span class="string">'54'</span>, <span class="string">'1'</span>, <span class="string">'1492090946105'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116250'</span>, <span class="string">'TRADE_SUCCESS'</span>, <span class="string">'2017-04-13 21:42:41'</span>, <span class="string">'2017-04-13 21:42:41'</span>), (<span class="string">'55'</span>, <span class="string">'1'</span>, <span class="string">'1492091003128'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116251'</span>, <span class="string">'WAIT_BUYER_PAY'</span>, <span class="string">'2017-04-13 21:43:31'</span>, <span class="string">'2017-04-13 21:43:31'</span>), (<span class="string">'56'</span>, <span class="string">'1'</span>, <span class="string">'1492091003128'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116251'</span>, <span class="string">'TRADE_SUCCESS'</span>, <span class="string">'2017-04-13 21:43:38'</span>, <span class="string">'2017-04-13 21:43:38'</span>), (<span class="string">'57'</span>, <span class="string">'1'</span>, <span class="string">'1492091141269'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116252'</span>, <span class="string">'WAIT_BUYER_PAY'</span>, <span class="string">'2017-04-13 21:45:59'</span>, <span class="string">'2017-04-13 21:45:59'</span>), (<span class="string">'58'</span>, <span class="string">'1'</span>, <span class="string">'1492091141269'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116252'</span>, <span class="string">'TRADE_SUCCESS'</span>, <span class="string">'2017-04-13 21:46:07'</span>, <span class="string">'2017-04-13 21:46:07'</span>), (<span class="string">'59'</span>, <span class="string">'1'</span>, <span class="string">'1492091110004'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116396'</span>, <span class="string">'WAIT_BUYER_PAY'</span>, <span class="string">'2017-04-13 21:55:08'</span>, <span class="string">'2017-04-13 21:55:08'</span>), (<span class="string">'60'</span>, <span class="string">'1'</span>, <span class="string">'1492091110004'</span>, <span class="string">'1'</span>, <span class="string">'2017041321001004300200116396'</span>, <span class="string">'TRADE_SUCCESS'</span>, <span class="string">'2017-04-13 21:55:17'</span>, <span class="string">'2017-04-13 21:55:17'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_product`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_product`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_product`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'商品id'</span>,</div><div class="line">  <span class="string">`category_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'分类id,对应mmall_category表的主键'</span>,</div><div class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品名称'</span>,</div><div class="line">  <span class="string">`subtitle`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'商品副标题'</span>,</div><div class="line">  <span class="string">`main_image`</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'产品主图,url相对地址'</span>,</div><div class="line">  <span class="string">`sub_images`</span> <span class="built_in">text</span> <span class="keyword">COMMENT</span> <span class="string">'图片地址,json格式,扩展用'</span>,</div><div class="line">  <span class="string">`detail`</span> <span class="built_in">text</span> <span class="keyword">COMMENT</span> <span class="string">'商品详情'</span>,</div><div class="line">  <span class="string">`price`</span> <span class="built_in">decimal</span>(<span class="number">20</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'价格,单位-元保留两位小数'</span>,</div><div class="line">  <span class="string">`stock`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'库存数量'</span>,</div><div class="line">  <span class="string">`status`</span> <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'商品状态.1-在售 2-下架 3-删除'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">30</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_product`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_product`</span> <span class="keyword">VALUES</span> (<span class="string">'26'</span>, <span class="string">'100002'</span>, <span class="string">'Apple iPhone 7 Plus (A1661) 128G 玫瑰金色 移动联通电信4G手机'</span>, <span class="string">'iPhone 7，现更以红色呈现。'</span>, <span class="string">'241997c4-9e62-4824-b7f0-7425c3c28917.jpeg'</span>, <span class="string">'241997c4-9e62-4824-b7f0-7425c3c28917.jpeg,b6c56eb0-1748-49a9-98dc-bcc4b9788a54.jpeg,92f17532-1527-4563-aa1d-ed01baa0f7b2.jpeg,3adbe4f7-e374-4533-aa79-cc4a98c529bf.jpeg'</span>, <span class="string">'&lt;p&gt;&lt;img alt=\"10000.jpg\" src=\"http://img.happymmall.com/00bce8d4-e9af-4c8d-b205-e6c75c7e252b.jpg\" width=\"790\" height=\"553\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"20000.jpg\" src=\"http://img.happymmall.com/4a70b4b4-01ee-46af-9468-31e67d0995b8.jpg\" width=\"790\" height=\"525\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"30000.jpg\" src=\"http://img.happymmall.com/0570e033-12d7-49b2-88f3-7a5d84157223.jpg\" width=\"790\" height=\"365\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"40000.jpg\" src=\"http://img.happymmall.com/50515c02-3255-44b9-a829-9e141a28c08a.jpg\" width=\"790\" height=\"525\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"50000.jpg\" src=\"http://img.happymmall.com/c138fc56-5843-4287-a029-91cf3732d034.jpg\" width=\"790\" height=\"525\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"60000.jpg\" src=\"http://img.happymmall.com/c92d1f8a-9827-453f-9d37-b10a3287e894.jpg\" width=\"790\" height=\"525\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"TB24p51hgFkpuFjSspnXXb4qFXa-1776456424.jpg\" src=\"http://img.happymmall.com/bb1511fc-3483-471f-80e5-c7c81fa5e1dd.jpg\" width=\"790\" height=\"375\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"shouhou.jpg\" src=\"http://img.happymmall.com/698e6fbe-97ea-478b-8170-008ad24030f7.jpg\" width=\"750\" height=\"150\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"999.jpg\" src=\"http://img.happymmall.com/ee276fe6-5d79-45aa-8393-ba1d210f9c89.jpg\" width=\"790\" height=\"351\"&gt;&lt;br&gt;&lt;/p&gt;'</span>, <span class="string">'6999.00'</span>, <span class="string">'9991'</span>, <span class="string">'1'</span>, <span class="literal">null</span>, <span class="string">'2017-04-13 21:45:41'</span>), (<span class="string">'27'</span>, <span class="string">'100006'</span>, <span class="string">'Midea/美的 BCD-535WKZM(E)冰箱双开门对开门风冷无霜智能电家用'</span>, <span class="string">'送品牌烤箱，五一大促'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg'</span>, <span class="string">'ac3e571d-13ce-4fad-89e8-c92c2eccf536.jpeg,4bb02f1c-62d5-48cc-b358-97b05af5740d.jpeg,36bdb49c-72ae-4185-9297-78829b54b566.jpeg'</span>, <span class="string">'&lt;p&gt;&lt;img alt=\"miaoshu.jpg\" src=\"http://img.happymmall.com/9c5c74e6-6615-4aa0-b1fc-c17a1eff6027.jpg\" width=\"790\" height=\"444\"&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=\"miaoshu2.jpg\" src=\"http://img.happymmall.com/31dc1a94-f354-48b8-a170-1a1a6de8751b.jpg\" width=\"790\" height=\"1441\"&gt;&lt;img alt=\"miaoshu3.jpg\" src=\"http://img.happymmall.com/7862594b-3063-4b52-b7d4-cea980c604e0.jpg\" width=\"790\" height=\"1442\"&gt;&lt;img alt=\"miaoshu4.jpg\" src=\"http://img.happymmall.com/9a650563-dc85-44d6-b174-d6960cfb1d6a.jpg\" width=\"790\" height=\"1441\"&gt;&lt;br&gt;&lt;/p&gt;'</span>, <span class="string">'3299.00'</span>, <span class="string">'8876'</span>, <span class="string">'1'</span>, <span class="string">'2017-04-13 18:51:54'</span>, <span class="string">'2017-04-13 21:45:41'</span>), (<span class="string">'28'</span>, <span class="string">'100012'</span>, <span class="string">'4+64G送手环/Huawei/华为 nova 手机P9/P10plus青春'</span>, <span class="string">'NOVA青春版1999元'</span>, <span class="string">'0093f5d3-bdb4-4fb0-bec5-5465dfd26363.jpeg'</span>, <span class="string">'0093f5d3-bdb4-4fb0-bec5-5465dfd26363.jpeg,13da2172-4445-4eb5-a13f-c5d4ede8458c.jpeg,58d5d4b7-58d4-4948-81b6-2bae4f79bf02.jpeg'</span>, <span class="string">'&lt;p&gt;&lt;img alt=\"11TB2fKK3cl0kpuFjSsziXXa.oVXa_!!1777180618.jpg\" src=\"http://img.happymmall.com/5c2d1c6d-9e09-48ce-bbdb-e833b42ff664.jpg\" width=\"790\" height=\"966\"&gt;&lt;img alt=\"22TB2YP3AkEhnpuFjSZFpXXcpuXXa_!!1777180618.jpg\" src=\"http://img.happymmall.com/9a10b877-818f-4a27-b6f7-62887f3fb39d.jpg\" width=\"790\" height=\"1344\"&gt;&lt;img alt=\"33TB2Yyshk.hnpuFjSZFpXXcpuXXa_!!1777180618.jpg\" src=\"http://img.happymmall.com/7d7fbd69-a3cb-4efe-8765-423bf8276e3e.jpg\" width=\"790\" height=\"700\"&gt;&lt;img alt=\"TB2diyziB8kpuFjSspeXXc7IpXa_!!1777180618.jpg\" src=\"http://img.happymmall.com/1d7160d2-9dba-422f-b2a0-e92847ba6ce9.jpg\" width=\"790\" height=\"393\"&gt;&lt;br&gt;&lt;/p&gt;'</span>, <span class="string">'1999.00'</span>, <span class="string">'9994'</span>, <span class="string">'1'</span>, <span class="string">'2017-04-13 18:57:18'</span>, <span class="string">'2017-04-13 21:45:41'</span>), (<span class="string">'29'</span>, <span class="string">'100008'</span>, <span class="string">'Haier/海尔HJ100-1HU1 10公斤滚筒洗衣机全自动带烘干家用大容量 洗烘一体'</span>, <span class="string">'门店机型 德邦送货'</span>, <span class="string">'173335a4-5dce-4afd-9f18-a10623724c4e.jpeg'</span>, <span class="string">'173335a4-5dce-4afd-9f18-a10623724c4e.jpeg,42b1b8bc-27c7-4ee1-80ab-753d216a1d49.jpeg,2f1b3de1-1eb1-4c18-8ca2-518934931bec.jpeg'</span>, <span class="string">'&lt;p&gt;&lt;img alt=\"1TB2WLZrcIaK.eBjSspjXXXL.XXa_!!2114960396.jpg\" src=\"http://img.happymmall.com/ffcce953-81bd-463c-acd1-d690b263d6df.jpg\" width=\"790\" height=\"920\"&gt;&lt;img alt=\"2TB2zhOFbZCO.eBjSZFzXXaRiVXa_!!2114960396.jpg\" src=\"http://img.happymmall.com/58a7bd25-c3e7-4248-9dba-158ef2a90e70.jpg\" width=\"790\" height=\"1052\"&gt;&lt;img alt=\"3TB27mCtb7WM.eBjSZFhXXbdWpXa_!!2114960396.jpg\" src=\"http://img.happymmall.com/2edbe9b3-28be-4a8b-a9c3-82e40703f22f.jpg\" width=\"790\" height=\"820\"&gt;&lt;br&gt;&lt;/p&gt;'</span>, <span class="string">'4299.00'</span>, <span class="string">'9993'</span>, <span class="string">'1'</span>, <span class="string">'2017-04-13 19:07:47'</span>, <span class="string">'2017-04-13 21:45:41'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_shipping`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_shipping`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_shipping`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户id'</span>,</div><div class="line">  <span class="string">`receiver_name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'收货姓名'</span>,</div><div class="line">  <span class="string">`receiver_phone`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'收货固定电话'</span>,</div><div class="line">  <span class="string">`receiver_mobile`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'收货移动电话'</span>,</div><div class="line">  <span class="string">`receiver_province`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'省份'</span>,</div><div class="line">  <span class="string">`receiver_city`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'城市'</span>,</div><div class="line">  <span class="string">`receiver_district`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'区/县'</span>,</div><div class="line">  <span class="string">`receiver_address`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'详细地址'</span>,</div><div class="line">  <span class="string">`receiver_zip`</span> <span class="built_in">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮编'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">33</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_shipping`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_shipping`</span> <span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'13'</span>, <span class="string">'geely'</span>, <span class="string">'010'</span>, <span class="string">'18688888888'</span>, <span class="string">'北京'</span>, <span class="string">'北京市'</span>, <span class="string">'海淀区'</span>, <span class="string">'中关村'</span>, <span class="string">'100000'</span>, <span class="string">'2017-01-22 14:26:25'</span>, <span class="string">'2017-01-22 14:26:25'</span>), (<span class="string">'7'</span>, <span class="string">'17'</span>, <span class="string">'Rosen'</span>, <span class="string">'13800138000'</span>, <span class="string">'13800138000'</span>, <span class="string">'北京'</span>, <span class="string">'北京'</span>, <span class="literal">null</span>, <span class="string">'中关村'</span>, <span class="string">'100000'</span>, <span class="string">'2017-03-29 12:11:01'</span>, <span class="string">'2017-03-29 12:11:01'</span>), (<span class="string">'29'</span>, <span class="string">'1'</span>, <span class="string">'吉利'</span>, <span class="string">'13800138000'</span>, <span class="string">'13800138000'</span>, <span class="string">'北京'</span>, <span class="string">'北京'</span>, <span class="string">'海淀区'</span>, <span class="string">'海淀区中关村'</span>, <span class="string">'100000'</span>, <span class="string">'2017-04-09 18:33:32'</span>, <span class="string">'2017-04-09 18:33:32'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `mmall_user`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mmall_user`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mmall_user`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'用户表id'</span>,</div><div class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户名'</span>,</div><div class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户密码，MD5加密'</span>,</div><div class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`phone`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`question`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'找回密码问题'</span>,</div><div class="line">  <span class="string">`answer`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'找回密码答案'</span>,</div><div class="line">  <span class="string">`role`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'角色0-管理员,1-普通用户'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</div><div class="line">  <span class="string">`update_time`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'最后一次更新时间'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</div><div class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`user_name_unique`</span> (<span class="string">`username`</span>) <span class="keyword">USING</span> BTREE</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">22</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `mmall_user`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`mmall_user`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'admin'</span>, <span class="string">'427338237BD929443EC5D48E24FD2B1A'</span>, <span class="string">'admin@happymmall.com'</span>, <span class="string">'13800138000'</span>, <span class="string">'问题'</span>, <span class="string">'答案'</span>, <span class="string">'1'</span>, <span class="string">'2016-11-06 16:56:45'</span>, <span class="string">'2017-04-04 19:27:36'</span>), (<span class="string">'13'</span>, <span class="string">'geely'</span>, <span class="string">'08E9A6EA287E70E7E3F7C982BF7923AC'</span>, <span class="string">'geely@happymmall.com'</span>, <span class="string">'13800138000'</span>, <span class="string">'问题'</span>, <span class="string">'答案'</span>, <span class="string">'0'</span>, <span class="string">'2016-11-19 22:19:25'</span>, <span class="string">'2016-11-19 22:19:25'</span>), (<span class="string">'17'</span>, <span class="string">'rosen'</span>, <span class="string">'095AC193FE2212EEC7A93E8FEFF11902'</span>, <span class="string">'rosen1@happymmall.com'</span>, <span class="string">'13800138000'</span>, <span class="string">'问题'</span>, <span class="string">'答案'</span>, <span class="string">'0'</span>, <span class="string">'2017-03-17 10:51:33'</span>, <span class="string">'2017-04-09 23:13:26'</span>), (<span class="string">'21'</span>, <span class="string">'soonerbetter'</span>, <span class="string">'DE6D76FE7C40D5A1A8F04213F2BEFBEE'</span>, <span class="string">'test06@happymmall.com'</span>, <span class="string">'13800138000'</span>, <span class="string">'105204'</span>, <span class="string">'105204'</span>, <span class="string">'0'</span>, <span class="string">'2017-04-13 21:26:22'</span>, <span class="string">'2017-04-13 21:26:22'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS = <span class="number">1</span>;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;数据库设计&quot;&gt;&lt;a href=&quot;#数据库设计&quot; class=&quot;headerlink&quot; title=&quot;数据库设计&quot;&gt;&lt;/a&gt;数据库设计&lt;/h3&gt;&lt;h4 id=&quot;数据表结构&quot;&gt;&lt;a href=&quot;#数据表结构&quot; class=&quot;headerlink&quot; title=&quot;数据表
    
    </summary>
    
      <category term="项目实战" scheme="http://www.fireworm.online/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
    
      <category term="电商后台" scheme="http://www.fireworm.online/tags/%E7%94%B5%E5%95%86%E5%90%8E%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>电商实战(六)---项目初始化一</title>
    <link href="http://www.fireworm.online/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2017/06/06/%E7%94%B5%E5%95%86%E5%AE%9E%E6%88%98-%E5%85%AD-%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96.html"/>
    <id>http://www.fireworm.online/项目实战/2017/06/06/电商实战-六-项目初始化.html</id>
    <published>2017-06-06T13:29:11.000Z</published>
    <updated>2017-06-06T13:29:11.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="IDEA创建Maven项目"><a href="#IDEA创建Maven项目" class="headerlink" title="IDEA创建Maven项目"></a>IDEA创建Maven项目</h1><p><img src="http://oayt7zau6.bkt.clouddn.com/maven_idea.jpg" alt="enter image description here"></p>
<h3 id="初始化git"><a href="#初始化git" class="headerlink" title="初始化git"></a><font color="blue">初始化git</font></h3><p>上面我们创建一个Maven项目之后接下来初始化git:<br>1.创建README.md文件,在IDEA下打开终端输入:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ touch README.md</div><div class="line"><span class="comment">-- 输入说明</span></div></pre></td></tr></table></figure></p>
<p>2.创建.gitignore文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ touch .gitignore</div><div class="line"></div><div class="line">-- 内容如下</div><div class="line">*.class</div><div class="line"></div><div class="line"># package file</div><div class="line">*.war</div><div class="line">*.ear</div><div class="line"></div><div class="line"># kdiff3 ignore</div><div class="line">*.orig</div><div class="line"></div><div class="line">#maven ignoer</div><div class="line">target/</div><div class="line"></div><div class="line"># eclipse ignore</div><div class="line">.settings/</div><div class="line">.project</div><div class="line">.classpath</div><div class="line"></div><div class="line"># idea ignore</div><div class="line">.idea/</div><div class="line">/idea/</div><div class="line">*.ipr</div><div class="line">*.iml</div><div class="line">*.iws</div><div class="line"></div><div class="line"># temp ignore</div><div class="line">*.log</div><div class="line">*.cache</div><div class="line">*.diff</div><div class="line">*.patch</div><div class="line">*.tmp</div><div class="line"></div><div class="line"># system ignore</div><div class="line">.DS_Store</div><div class="line">Thumbs.db</div></pre></td></tr></table></figure></p>
<p>3.初始化git项目<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git init</div><div class="line">Initialized empty Git repository in /Users/panyuanyuan/java/note/code_project/new/mmall/.git/</div></pre></td></tr></table></figure></p>
<p>4.提交项目<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 添加项目</span></div><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git add .</div><div class="line"></div><div class="line"><span class="comment">-- 提交到本地</span></div><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git <span class="keyword">commit</span> -am <span class="string">'first init project'</span></div><div class="line"></div><div class="line"><span class="comment">-- 添加远端仓库(保证远端有本地的公钥)</span></div><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git remote <span class="keyword">add</span> origin git@git.oschina.net:jose_uncle/mmall_learning.git</div><div class="line"></div><div class="line"><span class="comment">-- 拉取代码</span></div><div class="line">git pull</div><div class="line"></div><div class="line"><span class="comment">-- 提交到远端服务器</span></div><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git push -u -f origin <span class="keyword">master</span></div></pre></td></tr></table></figure></p>
<p>5.查看是否推送成功<br><img src="http://oayt7zau6.bkt.clouddn.com/git_push.jpg" alt="enter image description here"><br>6.查看本地分支和远程分支<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git branch</div><div class="line">* master</div></pre></td></tr></table></figure></p>
<p>7.查看远端分支<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git branch -r</div><div class="line">  origin/master</div></pre></td></tr></table></figure></p>
<p>8.创建分支并切换分支<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 创建分支并切换</span></div><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git checkout -b v1.0 origin/master</div><div class="line">Branch v1.0 <span class="keyword">set</span> up <span class="keyword">to</span> track remote branch <span class="keyword">master</span> <span class="keyword">from</span> origin.</div><div class="line">Switched <span class="keyword">to</span> a <span class="keyword">new</span> branch <span class="string">'v1.0'</span></div><div class="line"></div><div class="line"><span class="comment">-- 查看当前分支</span></div><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git branch</div><div class="line">  <span class="keyword">master</span></div><div class="line">* v1<span class="number">.0</span></div><div class="line"></div><div class="line"><span class="comment">-- 将当前分支推送到服务器</span></div><div class="line">shizhengyangdeMacBook-Pro:mmall panyuanyuan$ git push origin <span class="keyword">HEAD</span> -u</div><div class="line">Total <span class="number">0</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</div><div class="line"><span class="keyword">To</span> git.oschina.net:jose_uncle/mmall_learning.git</div><div class="line"> * [<span class="keyword">new</span> branch]      <span class="keyword">HEAD</span> -&gt; v1<span class="number">.0</span></div><div class="line">Branch v1<span class="number">.0</span> <span class="keyword">set</span> up <span class="keyword">to</span> track remote branch v1<span class="number">.0</span> <span class="keyword">from</span> origin.</div></pre></td></tr></table></figure></p>
<h3 id="修改POM文件"><a href="#修改POM文件" class="headerlink" title="修改POM文件"></a><font color="blue">修改POM文件</font></h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div></pre></td><td class="code"><pre><div class="line">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;</div><div class="line">  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</div><div class="line">  &lt;groupId&gt;com&lt;/groupId&gt;</div><div class="line">  &lt;artifactId&gt;mmall&lt;/artifactId&gt;</div><div class="line">  &lt;packaging&gt;war&lt;/packaging&gt;</div><div class="line">  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</div><div class="line">  &lt;name&gt;mmall Maven Webapp&lt;/name&gt;</div><div class="line">  &lt;url&gt;http://maven.apache.org&lt;/url&gt;</div><div class="line"></div><div class="line">  &lt;properties&gt;</div><div class="line">    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</div><div class="line">    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</div><div class="line">    &lt;maven.compiler.encoding&gt;UTF-8&lt;/maven.compiler.encoding&gt;</div><div class="line"></div><div class="line">    &lt;org.springframework.version&gt;4.0.0.RELEASE&lt;/org.springframework.version&gt;</div><div class="line">    &lt;org.mybatis.version&gt;3.4.1&lt;/org.mybatis.version&gt;</div><div class="line">    &lt;org.mybatis.spring.version&gt;1.3.0&lt;/org.mybatis.spring.version&gt;</div><div class="line">  &lt;/properties&gt;</div><div class="line"></div><div class="line">  &lt;dependencies&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;tomcat-servlet-api&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;7.0.64&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;$&#123;org.springframework.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;$&#123;org.springframework.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;$&#123;org.springframework.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;$&#123;org.springframework.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;spring-test&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;$&#123;org.springframework.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.7.3&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;$&#123;org.mybatis.spring.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;$&#123;org.mybatis.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.6.11&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.9.12&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.4&lt;/version&gt;</div><div class="line">      &lt;!--&lt;scope&gt;runtime&lt;/scope&gt;--&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.1.2&lt;/version&gt;</div><div class="line">      &lt;scope&gt;compile&lt;/scope&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;logback-core&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.1.2&lt;/version&gt;</div><div class="line">      &lt;scope&gt;compile&lt;/scope&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;mysql&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;5.1.6&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;guava&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;20.0&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;3.5&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-collections&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;3.2.1&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;junit&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;junit&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;4.12&lt;/version&gt;</div><div class="line">      &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;joda-time&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;joda-time&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;2.3&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;!-- id加密解密 --&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.hashids&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;hashids&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.0.1&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;!-- ftpclient --&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-net&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-net&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;3.1&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;!-- file upload --&gt;</div><div class="line"></div><div class="line">    &lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.2.2&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-io&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-io&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;2.0.1&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    &lt;!-- mybatis pager --&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;4.1.0&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;com.github.miemiedev&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;mybatis-paginator&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.2.17&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;com.github.jsqlparser&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;jsqlparser&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;0.9.4&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;!-- alipay --&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-codec&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.10&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-configuration&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-configuration&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.10&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-lang&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;2.6&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;commons-logging&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.1.1&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;core&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;2.1&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;gson&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;2.3.1&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;1.3&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line"></div><div class="line">    &lt;dependency&gt;</div><div class="line">      &lt;groupId&gt;redis.clients&lt;/groupId&gt;</div><div class="line">      &lt;artifactId&gt;jedis&lt;/artifactId&gt;</div><div class="line">      &lt;version&gt;2.9.0&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">  &lt;/dependencies&gt;</div><div class="line"></div><div class="line"></div><div class="line">  &lt;build&gt;</div><div class="line">    &lt;finalName&gt;mmall&lt;/finalName&gt;</div><div class="line">    &lt;plugins&gt;</div><div class="line">      &lt;plugin&gt;</div><div class="line">        &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;1.3.2&lt;/version&gt;</div><div class="line">        &lt;configuration&gt;</div><div class="line">          &lt;verbose&gt;true&lt;/verbose&gt;</div><div class="line">          &lt;overwrite&gt;true&lt;/overwrite&gt;</div><div class="line">        &lt;/configuration&gt;</div><div class="line">      &lt;/plugin&gt;</div><div class="line"></div><div class="line">      &lt;!-- geelynote maven的核心插件之-complier插件默认只支持编译Java 1.4，因此需要加上支持高版本jre的配置，在pom.xml里面加上 增加编译插件 --&gt;</div><div class="line">      &lt;plugin&gt;</div><div class="line">        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</div><div class="line">        &lt;configuration&gt;</div><div class="line">          &lt;source&gt;1.7&lt;/source&gt;</div><div class="line">          &lt;target&gt;1.7&lt;/target&gt;</div><div class="line">          &lt;encoding&gt;UTF-8&lt;/encoding&gt;</div><div class="line">          &lt;compilerArguments&gt;</div><div class="line">            &lt;extdirs&gt;$&#123;project.basedir&#125;/src/main/webapp/WEB-INF/lib&lt;/extdirs&gt;</div><div class="line">          &lt;/compilerArguments&gt;</div><div class="line">        &lt;/configuration&gt;</div><div class="line">      &lt;/plugin&gt;</div><div class="line">    &lt;/plugins&gt;</div><div class="line"></div><div class="line">  &lt;/build&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure>
<h3 id="配置Mybatis的generator自动生成器"><a href="#配置Mybatis的generator自动生成器" class="headerlink" title="配置Mybatis的generator自动生成器"></a><font color="blue">配置Mybatis的generator自动生成器</font></h3><p>1.在resource资源文件夹路径下创建datasource.properties,内容如下:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">db.driverLocation=/Users/panyuanyuan/java/note/code_project/new/mysql-connector-java-5.1.6-bin.jar</div><div class="line">db.driverClassName=com.mysql.jdbc.Driver</div><div class="line">db.url=jdbc:mysql://10.211.55.3:3306/mmall_learning?characterEncoding=utf-8</div><div class="line">db.username=panyuanyuan</div><div class="line">db.password=xxx</div></pre></td></tr></table></figure></p>
<p>2.在resource资源文件夹路径下创建generatorConfig.xml文件,配置如下:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line">&lt;!DOCTYPE generatorConfiguration</div><div class="line">  PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</div><div class="line">  "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</div><div class="line"></div><div class="line">&lt;generatorConfiguration&gt;</div><div class="line">  &lt;!--导入属性配置--&gt;</div><div class="line">  &lt;properties resource="datasource.properties"&gt;&lt;/properties&gt;</div><div class="line"></div><div class="line">  &lt;!--指定特定数据库的jdbc驱动jar包的位置--&gt;</div><div class="line">  &lt;classPathEntry location="$&#123;db.driverLocation&#125;"/&gt;</div><div class="line"></div><div class="line">  &lt;context id="default" targetRuntime="MyBatis3"&gt;</div><div class="line"></div><div class="line">    &lt;!-- optional，旨在创建class时，对注释进行控制 --&gt;</div><div class="line">    &lt;commentGenerator&gt;</div><div class="line">      &lt;property name="suppressDate" value="true"/&gt;</div><div class="line">      &lt;property name="suppressAllComments" value="true"/&gt;</div><div class="line">    &lt;/commentGenerator&gt;</div><div class="line"></div><div class="line">    &lt;!--jdbc的数据库连接 --&gt;</div><div class="line">    &lt;jdbcConnection</div><div class="line">      driverClass="$&#123;db.driverClassName&#125;"</div><div class="line">      connectionURL="$&#123;db.url&#125;"</div><div class="line">      userId="$&#123;db.username&#125;"</div><div class="line">      password="$&#123;db.password&#125;"&gt;</div><div class="line">    &lt;/jdbcConnection&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;!-- 非必需，类型处理器，在数据库类型和java类型之间的转换控制--&gt;</div><div class="line">    &lt;javaTypeResolver&gt;</div><div class="line">      &lt;property name="forceBigDecimals" value="false"/&gt;</div><div class="line">    &lt;/javaTypeResolver&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;!-- Model模型生成器,用来生成含有主键key的类，记录类 以及查询Example类</div><div class="line">        targetPackage     指定生成的model生成所在的包名</div><div class="line">        targetProject     指定在该项目下所在的路径</div><div class="line">    --&gt;</div><div class="line">    &lt;!--&lt;javaModelGenerator targetPackage="com.mmall.pojo" targetProject=".\src\main\java"&gt;--&gt;</div><div class="line">    &lt;javaModelGenerator targetPackage="com.mmall.pojo" targetProject="./src/main/java"&gt;</div><div class="line">      &lt;!-- 是否允许子包，即targetPackage.schemaName.tableName --&gt;</div><div class="line">      &lt;property name="enableSubPackages" value="false"/&gt;</div><div class="line">      &lt;!-- 是否对model添加 构造函数 --&gt;</div><div class="line">      &lt;property name="constructorBased" value="true"/&gt;</div><div class="line">      &lt;!-- 是否对类CHAR类型的列的数据进行trim操作 --&gt;</div><div class="line">      &lt;property name="trimStrings" value="true"/&gt;</div><div class="line">      &lt;!-- 建立的Model对象是否 不可改变  即生成的Model对象不会有 setter方法，只有构造方法 --&gt;</div><div class="line">      &lt;property name="immutable" value="false"/&gt;</div><div class="line">    &lt;/javaModelGenerator&gt;</div><div class="line"></div><div class="line">    &lt;!--mapper映射文件生成所在的目录 为每一个数据库的表生成对应的SqlMap文件 --&gt;</div><div class="line">    &lt;!--&lt;sqlMapGenerator targetPackage="mappers" targetProject=".\src\main\resources"&gt;--&gt;</div><div class="line">    &lt;sqlMapGenerator targetPackage="mappers" targetProject="./src/main/resources"&gt;</div><div class="line">      &lt;property name="enableSubPackages" value="false"/&gt;</div><div class="line">    &lt;/sqlMapGenerator&gt;</div><div class="line"></div><div class="line">    &lt;!-- 客户端代码，生成易于使用的针对Model对象和XML配置文件 的代码</div><div class="line">            type="ANNOTATEDMAPPER",生成Java Model 和基于注解的Mapper对象</div><div class="line">            type="MIXEDMAPPER",生成基于注解的Java Model 和相应的Mapper对象</div><div class="line">            type="XMLMAPPER",生成SQLMap XML文件和独立的Mapper接口</div><div class="line">    --&gt;</div><div class="line"></div><div class="line">    &lt;!-- targetPackage：mapper接口dao生成的位置 --&gt;</div><div class="line">    &lt;!--&lt;javaClientGenerator type="XMLMAPPER" targetPackage="com.mmall.dao" targetProject=".\src\main\java"&gt;--&gt;</div><div class="line">    &lt;javaClientGenerator type="XMLMAPPER" targetPackage="com.mmall.dao" targetProject="./src/main/java"&gt;</div><div class="line">      &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</div><div class="line">      &lt;property name="enableSubPackages" value="false" /&gt;</div><div class="line">    &lt;/javaClientGenerator&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;table tableName="mmall_shipping" domainObjectName="Shipping" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_cart" domainObjectName="Cart" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_cart_item" domainObjectName="CartItem" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_category" domainObjectName="Category" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_order" domainObjectName="Order" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_order_item" domainObjectName="OrderItem" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_pay_info" domainObjectName="PayInfo" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_product" domainObjectName="Product" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;</div><div class="line">      &lt;columnOverride column="detail" jdbcType="VARCHAR" /&gt;</div><div class="line">      &lt;columnOverride column="sub_images" jdbcType="VARCHAR" /&gt;</div><div class="line">    &lt;/table&gt;</div><div class="line">    &lt;table tableName="mmall_user" domainObjectName="User" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;!-- geelynote mybatis插件的搭建 --&gt;</div><div class="line">  &lt;/context&gt;</div><div class="line">&lt;/generatorConfiguration&gt;</div></pre></td></tr></table></figure></p>
<h3 id="运行插件自动生成代码"><a href="#运行插件自动生成代码" class="headerlink" title="运行插件自动生成代码"></a><font color="blue">运行插件自动生成代码</font></h3><p><img src="http://oayt7zau6.bkt.clouddn.com/mybatis_plugs.jpg" alt="enter image description here"></p>
<h3 id="下载安装mybatis-plugins"><a href="#下载安装mybatis-plugins" class="headerlink" title="下载安装mybatis plugins"></a><font color="blue">下载安装mybatis plugins</font></h3><p>作用:dao接口和mapper的快捷跳转<br><img src="http://oayt7zau6.bkt.clouddn.com/mybatis_plugin.jpg" alt="enter image description here"><br>1.找到安装的所在路径<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro% find ~ -name "mybatis_plus.jar"</div><div class="line">/Users/panyuanyuan/Library/Application Support/IntelliJIdea2017.1/mybatis_plus/lib/mybatis_plus.jar</div></pre></td></tr></table></figure></p>
<p>2.进入到路径<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /Users/XXXXX/Library/Application Support/IntelliJIdea15/mybatis_plus/lib</div></pre></td></tr></table></figure></p>
<p>3.开始破解<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">-- 破解包地址,我们只需要替换com文件即可</div><div class="line">https://github.com/myoss/profile/tree/master/idea/plugin/MybatisPlugin</div><div class="line"></div><div class="line">-- 创建一个文件夹</div><div class="line">mkdir m</div><div class="line">-- 进去 </div><div class="line">cd m</div><div class="line">-- 拷贝到m文件夹中 </div><div class="line">cp ../mybatis_plus.jar .</div><div class="line">-- 解压jar包</div><div class="line">jar xf mybatis_plus.jar </div><div class="line">-- 复制com文件夹到这里   路径根据你情况而定，版本号也根据你情况而定</div><div class="line">cp -r ~/Workspace/github/mybatis_plus/idea/plugin/MybatisPlugin/v2.7\~v2.83/com .</div><div class="line">-- 重新打为jar包</div><div class="line">jar cf mybatis_plus.jar *</div><div class="line">-- 复制到m的上层目录</div><div class="line">cp mybatis_plus.jar ../</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;IDEA创建Maven项目&quot;&gt;&lt;a href=&quot;#IDEA创建Maven项目&quot; class=&quot;headerlink&quot; title=&quot;IDEA创建Maven项目&quot;&gt;&lt;/a&gt;IDEA创建Maven项目&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;http://oayt7zau6
    
    </summary>
    
      <category term="项目实战" scheme="http://www.fireworm.online/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
    
      <category term="电商后台" scheme="http://www.fireworm.online/tags/%E7%94%B5%E5%95%86%E5%90%8E%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>电商实战(四)---环境配置之Mysql|Git</title>
    <link href="http://www.fireworm.online/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2017/06/06/%E7%94%B5%E5%95%86%E5%AE%9E%E6%88%98-%E5%9B%9B-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B9%8BMysql-Git.html"/>
    <id>http://www.fireworm.online/项目实战/2017/06/06/电商实战-四-环境配置之Mysql-Git.html</id>
    <published>2017-06-06T13:29:11.000Z</published>
    <updated>2017-06-06T13:29:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Mysql的安装"><a href="#Mysql的安装" class="headerlink" title="Mysql的安装"></a>Mysql的安装</h3><h4 id="下载安装Mysql"><a href="#下载安装Mysql" class="headerlink" title="下载安装Mysql"></a><font color="blue">下载安装Mysql</font></h4><p>1.打开终端输入— 默认版本5.1.73<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# sudo yum -y install mysql-server</div></pre></td></tr></table></figure></p>
<p>2.配置mysql的默认编码<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-- 编辑/etc/my.cnf文件</div><div class="line">[root@centos-linux etc]# sudo vim /etc/my.cnf</div><div class="line"></div><div class="line">-- 在symbolic-links=0下面添加如下的配置</div><div class="line">symbolic-links=0</div><div class="line">default-character-set = utf8 -- 配置项</div></pre></td></tr></table></figure></p>
<p>3.设置mysql随系统自动启动并查看<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux etc]# sudo chkconfig mysqld on</div><div class="line">-- 2-5都是on状态表示会随机器启动</div><div class="line">[root@centos-linux etc]# sudo chkconfig --list mysqld</div><div class="line">mysqld          0:off   1:off   2:on    3:on    4:on    5:on    6:off</div></pre></td></tr></table></figure></p>
<p>4.启动mysql服务<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux etc]# sudo service mysqld start</div></pre></td></tr></table></figure></p>
<p>5.登录查看<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">-- 第一次使用非密码登录</div><div class="line">[root@centos-linux etc]# mysql -u root</div><div class="line"></div><div class="line">-- 查看授权用户</div><div class="line">mysql&gt; select user,host from mysql.user;</div><div class="line">+------+---------------------+</div><div class="line">| user | host                |</div><div class="line">+------+---------------------+</div><div class="line">| root | 127.0.0.1           |</div><div class="line">|      | centos-linux.shared |</div><div class="line">| root | centos-linux.shared |</div><div class="line">|      | localhost           |</div><div class="line">| root | localhost           |</div><div class="line">+------+---------------------+</div><div class="line"></div><div class="line">-- 删除匿名用户</div><div class="line">mysql&gt; delete from mysql.user where user='';</div><div class="line">Query OK, 2 rows affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; select user,host from mysql.user;</div><div class="line">+------+---------------------+</div><div class="line">| user | host                |</div><div class="line">+------+---------------------+</div><div class="line">| root | 127.0.0.1           |</div><div class="line">| root | centos-linux.shared |</div><div class="line">| root | localhost           |</div><div class="line">+------+---------------------+</div><div class="line">3 rows in set (0.00 sec)</div><div class="line"></div><div class="line">-- 退出mysql</div><div class="line">mysql&gt; exit</div></pre></td></tr></table></figure></p>
<p>6.配置防火墙<br>这里同时把Nginx和Tomcat的端口也进行了配置,配置项如下:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux etc]# sudo vim /etc/sysconfig/iptables</div><div class="line"></div><div class="line">#nginx tomcat</div><div class="line">-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT</div><div class="line">-A INPUT -p tcp -m state --state NEW -m tcp --dport 8080 -j ACCEPT</div><div class="line"></div><div class="line">#mysql</div><div class="line">-A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT</div><div class="line"></div><div class="line">-- 重启防火墙</div><div class="line">[root@centos-linux etc]# sudo service iptables restart</div><div class="line">iptables: Applying firewall rules:                         [  OK  ]</div></pre></td></tr></table></figure></p>
<p>7.设置账号<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">-- 登录mysql</div><div class="line">[root@centos-linux etc]# mysql -u root</div><div class="line">mysql&gt; insert into mysql.user(Host,User,Password) values("localhost","panyuanyuan",password("123"));</div><div class="line">Query OK, 1 row affected, 3 warnings (0.01 sec)</div><div class="line"></div><div class="line">-- 查看用户表</div><div class="line">mysql&gt; select user,host from mysql.user;</div><div class="line">+-------------+---------------------+</div><div class="line">| user        | host                |</div><div class="line">+-------------+---------------------+</div><div class="line">| root        | 127.0.0.1           |</div><div class="line">| root        | centos-linux.shared |</div><div class="line">| panyuanyuan | localhost           |</div><div class="line">| root        | localhost           |</div><div class="line">+-------------+---------------------+</div><div class="line">4 rows in set (0.00 sec)</div></pre></td></tr></table></figure></p>
<p>8.创建一个数据库并设置权限<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create database `mmall` default character set utf8 collate utf8_general_ci;</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">-- 给数据库设置权限</div><div class="line">mysql&gt; grant select,delete,create on mmal.* to panyuanyuan@'%' identified by '123' with grant option;</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line"></div><div class="line">-- 设置密码</div><div class="line">mysql&gt; set password for root@localhost=password('123');</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div></pre></td></tr></table></figure></p>
<p>9.链接测试,用本机的Navicat链接CentOS的数据库链接<br><img src="http://oayt7zau6.bkt.clouddn.com/Navicat.jpg" alt="enter image description here"></p>
<h4 id="安装总结"><a href="#安装总结" class="headerlink" title="安装总结"></a><font color="blue">安装总结</font></h4><p>至此我们安装配置mysql完毕,接下来安装git</p>
<h3 id="Git的安装的安装与配置"><a href="#Git的安装的安装与配置" class="headerlink" title="Git的安装的安装与配置"></a>Git的安装的安装与配置</h3><p>1.下载GIT,本次采用的下载地址是<a href="http://learning.happymmall.com/git/git-v2.8.0.tar.gz" target="_blank" rel="external">http://learning.happymmall.com/git/git-v2.8.0.tar.gz</a><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# wget http://learning.happymmall.com/git/git-v2.8.0.tar.gz</div></pre></td></tr></table></figure></p>
<p>2.安装git的依赖包<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> curl</div><div class="line">yum <span class="keyword">install</span> curl-devel</div><div class="line">yum <span class="keyword">install</span> zlib-devel</div><div class="line">yum <span class="keyword">install</span> openssl-devel</div><div class="line">yum <span class="keyword">install</span> perl</div><div class="line">yum <span class="keyword">install</span> cpio</div><div class="line">yum <span class="keyword">install</span> expat-devel</div><div class="line">yum <span class="keyword">install</span> gettext-devel</div></pre></td></tr></table></figure></p>
<p>3.解压git安装包<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# tar -zxvf git-v2.8.0.tar.gz</div></pre></td></tr></table></figure></p>
<p>4.安装git<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">-- 进入到git的解压目录</div><div class="line">[root@centos-linux git-2.8.0]# cd git-2.8.0/</div><div class="line"></div><div class="line">-- 编译git</div><div class="line">[root@centos-linux git-2.8.0]# sudo make prefix=/usr/local/ all</div><div class="line"></div><div class="line">-- 安装git</div><div class="line">[root@centos-linux git-2.8.0]# sudo make prefix=/usr/local/ install</div><div class="line"></div><div class="line">-- 验证git的版本</div><div class="line">[root@centos-linux git-2.8.0]# git --version</div><div class="line">git version 2.8.0</div></pre></td></tr></table></figure></p>
<p>5.配置GIT<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">-- 输入以下命令一路回车生成ssh key</div><div class="line">[root@centos-linux git_down]# ssh-keygen -t rsa -C "panyuanyuan1024@163.com"</div><div class="line">Generating public/private rsa key pair.</div><div class="line">Enter file in which to save the key (/root/.ssh/id_rsa): </div><div class="line">Enter passphrase (empty for no passphrase): </div><div class="line">Enter same passphrase again: </div><div class="line">Your identification has been saved in /root/.ssh/id_rsa.</div><div class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</div><div class="line">The key fingerprint is:</div><div class="line">43:a7:76:72:ce:58:8a:ca:cc:cb:0c:19:ae:3b:3c:71 panyuanyuan1024@163.com</div><div class="line">The key's randomart image is:</div><div class="line">-- 将私钥告诉本地系统</div><div class="line">[root@centos-linux git_down]# ssh-add ~/.ssh/id_rsa</div><div class="line">Could not open a connection to your authentication agent.</div><div class="line"></div><div class="line">-- 解决以上出现的问题</div><div class="line">[root@centos-linux git_down]# eval `ssh-agent`</div><div class="line">Agent pid 15193</div><div class="line"></div><div class="line">-- 再次输入以下命令,问题解决</div><div class="line">[root@centos-linux git_down]# ssh-add ~/.ssh/id_rsa</div><div class="line">Identity added: /root/.ssh/id_rsa (/root/.ssh/id_rsa)</div><div class="line"></div><div class="line">-- 输入以下命令复制公钥</div><div class="line">[root@centos-linux git_down]# cat ~/.ssh/id_rsa.pub</div></pre></td></tr></table></figure></p>
<p>6.将公钥配置到马云上面<br><img src="http://oayt7zau6.bkt.clouddn.com/%E9%A9%AC%E4%BA%91.jpg" alt="enter image description here"><br>7.测试git配置<br>此时我们就可以验证git的配置是否成功,如果克隆项目成功表示我们的配置没有问题<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux learning]# git clone git@git.oschina.net:jose_uncle/learning.git</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Mysql的安装&quot;&gt;&lt;a href=&quot;#Mysql的安装&quot; class=&quot;headerlink&quot; title=&quot;Mysql的安装&quot;&gt;&lt;/a&gt;Mysql的安装&lt;/h3&gt;&lt;h4 id=&quot;下载安装Mysql&quot;&gt;&lt;a href=&quot;#下载安装Mysql&quot; class=&quot;he
    
    </summary>
    
      <category term="项目实战" scheme="http://www.fireworm.online/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
    
      <category term="电商后台" scheme="http://www.fireworm.online/tags/%E7%94%B5%E5%95%86%E5%90%8E%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>电商实战(三)---环境配置之NGINX</title>
    <link href="http://www.fireworm.online/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2017/06/06/%E7%94%B5%E5%95%86%E5%AE%9E%E6%88%98-%E4%B8%89-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B9%8BNGIX.html"/>
    <id>http://www.fireworm.online/项目实战/2017/06/06/电商实战-三-环境配置之NGIX.html</id>
    <published>2017-06-06T13:29:11.000Z</published>
    <updated>2017-06-06T13:29:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="NGINX简介与安装"><a href="#NGINX简介与安装" class="headerlink" title="NGINX简介与安装"></a>NGINX简介与安装</h3><h4 id="NGINX是什么"><a href="#NGINX是什么" class="headerlink" title="NGINX是什么"></a><font color="blue">NGINX是什么</font></h4><p>Ngix是一个轻量级的WEB服务器,也是一个反向代理服务器,是俄罗斯人开发的.</p>
<h4 id="NGINX安装"><a href="#NGINX安装" class="headerlink" title="NGINX安装"></a><font color="blue">NGINX安装</font></h4><p>1.首先安装Nginx环境依赖gcc.打开终端查看机器是否已经安装gcc<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# gcc -v</div><div class="line">gcc version 4.4.7 20120313 (Red Hat 4.4.7-17) (GCC)</div></pre></td></tr></table></figure></p>
<p>如果没有安装的话,执行下面命令进行安装:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> gcc</div></pre></td></tr></table></figure></p>
<p>2.安装Nginx的依赖pcre<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# sudo yum install pcre pcre-devel</div></pre></td></tr></table></figure></p>
<p>3.安装Nginx的依赖zlib<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# sudo yum install zlib zlib-devel</div></pre></td></tr></table></figure></p>
<p>4.安装Nginx的依赖openssl<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# sudo yum install openssl openssl-devel</div></pre></td></tr></table></figure></p>
<p>5.下载Nginx,这里采用的地址是:<a href="http://learning.happymmall.com/nginx/linux-nginx-1.10.2.tar.gz" target="_blank" rel="external">http://learning.happymmall.com/nginx/linux-nginx-1.10.2.tar.gz</a><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# wget http://learning.happymmall.com/nginx/linux-nginx-1.10.2.tar.gz</div><div class="line"></div><div class="line">-- 下载完成之后解压(这里的下载路径是/developer)</div><div class="line">[root@centos-linux developer]# tar -zxvf linux-nginx-1.10.2.tar.gz</div></pre></td></tr></table></figure></p>
<p>6.配置文件的检查和编译安装<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">-- 进入到解压后的Nginx文件目录进行文件检查</div><div class="line">[root@centos-linux nginx-1.10.2]# sudo ./configure</div><div class="line">-- 检查完成之后输入sudo make命令进行编译</div><div class="line">[root@centos-linux nginx-1.10.2]# sudo make</div><div class="line">-- 编译完成之后进行安装</div><div class="line">[root@centos-linux nginx-1.10.2]# sudo make install</div><div class="line"></div><div class="line">-- 安装完成之后查看安装的目录</div><div class="line">[root@centos-linux nginx-1.10.2]# whereis nginx</div><div class="line">nginx: /usr/local/nginx</div></pre></td></tr></table></figure></p>
<p>7.启动Nginx<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">-- 进入到Nginx的安装目录下面的/sbin目录</div><div class="line">[root@centos-linux nginx-1.10.2]# cd /usr/local/nginx/</div><div class="line">[root@centos-linux nginx]# ll</div><div class="line">total 16</div><div class="line">drwxr-xr-x. 2 root root 4096 Jun 10 15:12 conf</div><div class="line">drwxr-xr-x. 2 root root 4096 Jun 10 15:12 html</div><div class="line">drwxr-xr-x. 2 root root 4096 Jun 10 15:12 logs</div><div class="line">drwxr-xr-x. 2 root root 4096 Jun 10 15:12 sbin</div><div class="line">[root@centos-linux nginx]# cd sbin/</div><div class="line"></div><div class="line">-- 启动Nginx</div><div class="line">[root@centos-linux sbin]# ./nginx</div><div class="line"></div><div class="line">-- 查看Nginx所运行的进程</div><div class="line">[root@centos-linux sbin]# ps aux| grep nginx </div><div class="line">root     17481  0.0  0.0  23968   824 ?        Ss   15:16   0:00 nginx: master process ./nginx</div><div class="line">nobody   17482  0.0  0.1  24388  1404 ?        S    15:16   0:00 nginx: worker process</div><div class="line">root     17605  0.0  0.0 103312   880 pts/2    S+   15:16   0:00 grep nginx</div></pre></td></tr></table></figure></p>
<p>8.安装验证,因为Nginx默认是80端口,所以这里关闭防火墙直接访问ip即可<br><img src="http://oayt7zau6.bkt.clouddn.com/Nginx%E5%AE%89%E8%A3%85.jpg" alt="enter image description here"></p>
<h3 id="NGINX配置"><a href="#NGINX配置" class="headerlink" title="NGINX配置"></a>NGINX配置</h3><h4 id="NGINX配置服务转发"><a href="#NGINX配置服务转发" class="headerlink" title="NGINX配置服务转发"></a><font color="blue">NGINX配置服务转发</font></h4><p>1.进入到Nginx的安装目录的conf目录下,并创建vhost文件夹(方便管理)<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# cd /usr/local/nginx/conf/</div></pre></td></tr></table></figure></p>
<p>2.编辑nginx.conf文件添加如下配置<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux conf]# vim nginx.conf</div><div class="line"></div><div class="line">-- 添加如下配置,在HHTPS的上面配置</div><div class="line">include vhost/*.conf;</div><div class="line"># HTTPS server</div></pre></td></tr></table></figure></p>
<p>3.如果没有外网只在本机器局域网访问的话配置本机的host文件(不是linux)<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro% sudo vim hosts</div><div class="line"><span class="comment">-- 添加如下的配置,将本机的ip和域名进行绑定</span></div><div class="line">10.211.55.3 www.learning.com</div></pre></td></tr></table></figure></p>
<p>4.在nignx安装目录下的conf目录下创建vhost目录,并创建域名.conf进行配置<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux sbin]# cd /usr/local/nginx/conf/vhost/</div><div class="line">[root@centos-linux vhost]# vim www.learning.com.conf</div><div class="line">server &#123;</div><div class="line">    listen 80;</div><div class="line">    autoindex on;</div><div class="line">    server_name www.learning.com;</div><div class="line">    access_log /usr/local/nginx/logs/access.log combined;</div><div class="line">    index index.html index.htm index.jsp index.php;</div><div class="line">    if ( $query_string ~* ".*[\;'\&lt;\&gt;].*" )&#123;</div><div class="line">        return 404;</div><div class="line">    &#125;</div><div class="line">    location / &#123;</div><div class="line">       proxy_pass http://127.0.0.1:8080;</div><div class="line">       add_header Access-Control-Allow-Origin *;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5.配置完成之后重启Nginx服务器<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-- 进入到Nginx的安装目录下的sbin下执行命令</div><div class="line">[root@centos-linux vhost]#/usr/local/nginx/sbin</div><div class="line">[root@centos-linux sbin]# ./nginx -s reload -- 重启Nginx</div></pre></td></tr></table></figure></p>
<p>6.启动测试<br>打开本机浏览器(修改hosts文件的机器)访问www.learning.com,发下已经被转发<br><img src="http://oayt7zau6.bkt.clouddn.com/nginx%E6%B5%8B%E8%AF%95.jpg" alt="enter image description here"></p>
<h4 id="NGINX配置目录转发"><a href="#NGINX配置目录转发" class="headerlink" title="NGINX配置目录转发"></a><font color="blue">NGINX配置目录转发</font></h4><p>1.因为在本机局域网环境测试,所以这里要配置本机的hosts文件(不是linux)<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">10.211.55.3 www.learning.com</div><div class="line">10.211.55.3 www.learning.image.com <span class="comment">-- 新添加的图片的地址</span></div></pre></td></tr></table></figure></p>
<p>2.配置linux的Nginx反向代理配置<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">-- 找到nginx安装目录下的conf下的vhost文件夹</div><div class="line">[root@centos-linux sbin]# cd /usr/local/nginx/conf/vhost/</div><div class="line">-- 创建文件</div><div class="line">[root@centos-linux sbin]#vim www.learning.image.com.conf</div><div class="line">-- 编辑www.learning.image.com.conf文件</div><div class="line">server &#123;</div><div class="line">    listen 80;</div><div class="line">    autoindex off;</div><div class="line">    server_name www.learning.image.com;</div><div class="line">    access_log /usr/local/nginx/logs/access.log combined;</div><div class="line">    index index.html index.htm index.jsp index.php;</div><div class="line">    if ( $query_string ~* ".*[\;'\&lt;\&gt;].*" )&#123;</div><div class="line">        return 404;</div><div class="line">    &#125;</div><div class="line">    location / &#123;</div><div class="line">       root /ftpfile/image/; -- 路径指向FTP文件下的image文件夹</div><div class="line">       add_header Access-Control-Allow-Origin *;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.在FTP的文件夹下创建image文件夹,并上传图片1.jpg<br><img src="http://oayt7zau6.bkt.clouddn.com/ftp%E6%96%87%E4%BB%B6%E5%A4%B9.jpg" alt="enter image description here"><br>4.重启Nginx服务器<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux sbin]# cd /usr/local/nginx/sbin</div><div class="line">[root@centos-linux sbin]# ./nginx -s reload</div></pre></td></tr></table></figure></p>
<p>5.访问测试,在本机(修改hosts文件的机器)访问www.learning.image.com/1.jpg<br><img src="http://oayt7zau6.bkt.clouddn.com/nginx_test.jpg" alt="enter image description here"><br>到这里Nginx的安装和配置已经完成,并且与之前的vsftpd服务器已经形成了一个文件服务器,接下来下一章节我们安装Mysql和git</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;NGINX简介与安装&quot;&gt;&lt;a href=&quot;#NGINX简介与安装&quot; class=&quot;headerlink&quot; title=&quot;NGINX简介与安装&quot;&gt;&lt;/a&gt;NGINX简介与安装&lt;/h3&gt;&lt;h4 id=&quot;NGINX是什么&quot;&gt;&lt;a href=&quot;#NGINX是什么&quot; cla
    
    </summary>
    
      <category term="项目实战" scheme="http://www.fireworm.online/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
    
      <category term="电商后台" scheme="http://www.fireworm.online/tags/%E7%94%B5%E5%95%86%E5%90%8E%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>电商实战(二)---环境配置之VSFTP</title>
    <link href="http://www.fireworm.online/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2017/06/06/%E7%94%B5%E5%95%86%E5%AE%9E%E6%88%98-%E4%BA%8C-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html"/>
    <id>http://www.fireworm.online/项目实战/2017/06/06/电商实战-二-环境配置.html</id>
    <published>2017-06-06T13:29:11.000Z</published>
    <updated>2017-06-06T13:29:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>#电商实战(二)—环境配置之VSFTP<br>由于环境配置比较多也比较繁杂,这里讲环境的配置分成两节进行记录,这样使得学习起来更有规律可循.</p>
<h3 id="安装VSFTPD"><a href="#安装VSFTPD" class="headerlink" title="安装VSFTPD"></a>安装VSFTPD</h3><h4 id="下载安装VSFTP服务器"><a href="#下载安装VSFTP服务器" class="headerlink" title="下载安装VSFTP服务器"></a><font color="blue">下载安装VSFTP服务器</font></h4><p>什么是vsftpd?<br>vsftpd 是“very secure FTP daemon”的缩写，安全性是它的一个最大的特点。vsftpd 是一个 UNIX 类操作系统上运行的服务器的名字，它可以运行在诸如 Linux、BSD、Solaris、 HP-UNIX等系统上面，是一个完全免费的、开放源代码的ftp服务器软件，支持很多其他的 FTP 服务器所不支持的特征。比如：非常高的安全性需求、带宽限制、良好的可伸缩性、可创建虚拟用户、支持IPv6、速率高等</p>
<p>打开终端输入以下命令进行安装vsftpd服务器:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux bin]# sudo yum -y install vsftpd</div></pre></td></tr></table></figure></p>
<h4 id="配置VSFTP服务器—前奏"><a href="#配置VSFTP服务器—前奏" class="headerlink" title="配置VSFTP服务器—前奏"></a><font color="blue">配置VSFTP服务器—前奏</font></h4><p>1.在根目录下创建ftp文件夹,将来ftp上传的时候就会上传到这里:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux bin]# cd /</div><div class="line">[root@centos-linux /]# mkdir ftpfile</div></pre></td></tr></table></figure></p>
<p>2.创建一个ftp用户<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux /]# sudo useradd ftpuser -d /ftpfile/ -s /sbin/nologin </div><div class="line">useradd: warning: the home directory already exists.</div><div class="line">Not copying any file from skel directory into it.</div><div class="line">-- -d /ftpfile/指定用户主目录为/ftpfile目录</div><div class="line">-- -s /sbin/nologin 表示没有登录权限</div></pre></td></tr></table></figure></p>
<p>3.给用户分配权限:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux /]# sudo chown -R ftpuser.ftpuser /ftpfile/</div><div class="line">-- sudo chown改变用户权限</div><div class="line">-- R表示把/ftpfile/文件递归都生效</div></pre></td></tr></table></figure></p>
<p>4.查询用户以及组<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux /]# ll | grep ftp</div><div class="line">drwxr-xr-x.   2 ftpuser ftpuser  4096 Jun  8 23:38 ftpfile</div><div class="line">-- 组和用户都是ftpuser</div></pre></td></tr></table></figure></p>
<p>4.修改密码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux /]# sudo passwd ftpuser</div><div class="line">-- 这里都修改为123456</div></pre></td></tr></table></figure></p>
<p>5.进入到ftp目录创建一个测试文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux /]# cd /ftpfile/</div><div class="line">[root@centos-linux ftpfile]# vim index.html</div></pre></td></tr></table></figure></p>
<h4 id="配置VSFTP服务器"><a href="#配置VSFTP服务器" class="headerlink" title="配置VSFTP服务器"></a><font color="blue">配置VSFTP服务器</font></h4><p>1.查找某一个文件的路径:whereis XXX<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# whereis vsftpd</div><div class="line">vsftpd: /usr/sbin/vsftpd /etc/vsftpd /usr/share/man/man8/vsftpd.8.gz</div></pre></td></tr></table></figure></p>
<p>2.输入以下命令配置vsftpd的用户<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# sudo vim /etc/vsftpd/vsftpd.conf</div></pre></td></tr></table></figure></p>
<p>3.搜索banner的节点进行配置<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">/banner <span class="comment">-- 搜索banner节点</span></div><div class="line"></div><div class="line"><span class="comment">-- 找到该节点之后配置如下</span></div><div class="line">ftpd_banner=Welcome to JOSE FTP service.</div><div class="line">local_root=/ftpfile <span class="comment">-- 登录后访问的路径</span></div><div class="line">anon_root=/ftpfile <span class="comment">-- 怒名用户访问的路径</span></div></pre></td></tr></table></figure></p>
<p>4.搜索chroot_list节点进行配置<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/chroot_list -- 搜索到之后配置如下</div><div class="line"></div><div class="line">chroot_list_enable=YES</div><div class="line"># (default follows)</div><div class="line">chroot_list_file=/etc/vsftpd/chroot_list</div></pre></td></tr></table></figure></p>
<p>4.搜索anon,配置匿名访问<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/anon <span class="comment">-- 搜索到之后配置如下</span></div><div class="line"></div><div class="line">anonymous_enable=NO</div></pre></td></tr></table></figure></p>
<p>5.复制刚才配置的chroot_list的最后路径并创建该文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">chroot_list_file=/etc/vsftpd/chroot_list</div><div class="line"></div><div class="line">[root@centos-linux ~]# cd /etc/vsftpd/</div><div class="line">[root@centos-linux vsftpd]# vim chroot_list</div><div class="line"></div><div class="line">-- 创建好文件之后添加用户(ftpuser)到chroot_list中</div><div class="line">ftpuser</div></pre></td></tr></table></figure></p>
<p>6.在配置文件的末尾添加最小和最大端口<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">pam_service_name=vsftpd</div><div class="line">userlist_enable=YES</div><div class="line">tcp_wrappers=YES</div><div class="line"></div><div class="line">pasv_min_port=61001</div><div class="line">pasv_max_port=62000</div></pre></td></tr></table></figure></p>
<p>7.配置防火墙,打开防火墙配置文件,增加如下配置:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux vsftpd]# sudo vim /etc/sysconfig/iptables</div><div class="line">#vsftpd</div><div class="line">-A INPUT -p TCP --dport 61001:62000 -j ACCEPT</div><div class="line">-A OUTPUT -p TCP --sport 61001:62000 -j ACCEPT</div><div class="line"></div><div class="line">-A INPUT -p TCP --dport 20 -j ACCEPT</div><div class="line">-A OUTPUT -p TCP --dport 20 -j ACCEPT</div><div class="line">-A INPUT -p TCP --dport 21 -j ACCEPT</div><div class="line">-A OUTPUT -p TCP --dport 21 -j ACCEPT</div></pre></td></tr></table></figure></p>
<p>8.重启防火墙和vsftpd服务器<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux vsftpd]# sudo service iptables restart</div><div class="line">[root@centos-linux vsftpd]# sudo service vsftpd restart</div><div class="line">Shutting down vsftpd:                                      [  OK  ]</div><div class="line">Starting vsftpd for vsftpd:                                [  OK  ]</div></pre></td></tr></table></figure></p>
<p>9修改selinux配置文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ftpfile]# sudo vim /etc/selinux/config</div><div class="line">SELINUX=disable</div><div class="line"></div><div class="line">-- 使其生效</div><div class="line">[root@centos-linux ftpfile]# sudo setenforce 0</div></pre></td></tr></table></figure></p>
<p>10.打开终端连接ftp服务器:ftp xxx<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">shizhengyangdeMacBook-Pro% ftp 10.211.55.3</div><div class="line">Connected to 10.211.55.3.</div><div class="line">220 Welcome to JOSE FTP service.</div><div class="line"></div><div class="line"><span class="comment">-- 输入ftpuser进行登录</span></div><div class="line">Name (10.211.55.3:panyuanyuan): ftpuser</div><div class="line">331 Please specify the password.</div><div class="line">Password:</div><div class="line">230 Login successful.</div><div class="line">Remote system type is UNIX.</div><div class="line">Using binary mode to transfer files.</div></pre></td></tr></table></figure></p>
<p><font color="red">注意点:</font><br>编辑vsftpd的配置文件时,注意如下的配置要采用默认配置为NO,如果配置为NO证明我们不能访问上一级目录,如果配置为YES说明我们可以访问到上一级目录中<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# vim /etc/vsftpd/vsftpd.conf </div><div class="line">#chroot_local_user=YES -- 默认注释掉</div></pre></td></tr></table></figure></p>
<p>当切换目录时,虽然提示成功,但是dir时还在这个目录中,这样比较安全<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">ftp&gt; dir</div><div class="line">229 Entering Extended Passive Mode (|||61370|).</div><div class="line">150 Here comes the directory listing.</div><div class="line">drwxr-xr-x    2 501      501          4096 Jun 10 11:08 aa</div><div class="line">drwxr-xr-x    2 501      501          4096 Jun 10 11:23 ceshi</div><div class="line">-rw-r--r--    1 0        0              17 Jun 08 23:54 index.html</div><div class="line">226 Directory send OK.</div><div class="line">ftp&gt; cd ..</div><div class="line">250 Directory successfully changed.</div><div class="line">ftp&gt; dir</div><div class="line">229 Entering Extended Passive Mode (|||61242|).</div><div class="line">150 Here comes the directory listing.</div><div class="line">drwxr-xr-x    2 501      501          4096 Jun 10 11:08 aa</div><div class="line">drwxr-xr-x    2 501      501          4096 Jun 10 11:23 ceshi</div><div class="line">-rw-r--r--    1 0        0              17 Jun 08 23:54 index.html</div><div class="line">226 Directory send OK.</div></pre></td></tr></table></figure></p>
<p>11.打开浏览器或者ftp链接工具测试<br><img src="http://oayt7zau6.bkt.clouddn.com/%E6%B5%8F%E8%A7%88%E5%99%A8_FTP.jpg" alt="enter image description here"><br><img src="http://oayt7zau6.bkt.clouddn.com/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7FTP.jpg" alt="enter image description here"></p>
<h3 id="完结"><a href="#完结" class="headerlink" title="完结"></a>完结</h3><p>到这里FTP服务器的搭建和安装结束</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;#电商实战(二)—环境配置之VSFTP&lt;br&gt;由于环境配置比较多也比较繁杂,这里讲环境的配置分成两节进行记录,这样使得学习起来更有规律可循.&lt;/p&gt;
&lt;h3 id=&quot;安装VSFTPD&quot;&gt;&lt;a href=&quot;#安装VSFTPD&quot; class=&quot;headerlink&quot; title
    
    </summary>
    
      <category term="项目实战" scheme="http://www.fireworm.online/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
    
      <category term="电商后台" scheme="http://www.fireworm.online/tags/%E7%94%B5%E5%95%86%E5%90%8E%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>电商实战(一)---环境配置之JDK|Tomcat</title>
    <link href="http://www.fireworm.online/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2017/06/06/%E7%94%B5%E5%95%86%E5%AE%9E%E6%88%98-%E4%B8%80-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html"/>
    <id>http://www.fireworm.online/项目实战/2017/06/06/电商实战-一-环境配置.html</id>
    <published>2017-06-06T13:29:11.000Z</published>
    <updated>2017-06-06T13:29:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="CentOS常用命令"><a href="#CentOS常用命令" class="headerlink" title="CentOS常用命令"></a>CentOS常用命令</h3><h4 id="CentOs图形界面启动"><a href="#CentOs图形界面启动" class="headerlink" title="CentOs图形界面启动"></a><font color="blue">CentOs图形界面启动</font></h4><p>图形界面启动后输入:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">init 5</div></pre></td></tr></table></figure></p>
<h4 id="查询某个已经安装软件的版本"><a href="#查询某个已经安装软件的版本" class="headerlink" title="查询某个已经安装软件的版本"></a><font color="blue">查询某个已经安装软件的版本</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -qa | grep jdk</div></pre></td></tr></table></figure>
<h4 id="查询结果"><a href="#查询结果" class="headerlink" title="查询结果"></a><font color="blue">查询结果</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">java-1.7.0-openjdk-1.7.0.99-2.6.5.1.el6.x86_64</div><div class="line">java-1.6.0-openjdk-1.6.0.38-1.13.10.4.el6.x86_64</div></pre></td></tr></table></figure>
<h4 id="删除默认openjdk"><a href="#删除默认openjdk" class="headerlink" title="删除默认openjdk"></a><font color="blue">删除默认openjdk</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum remove java-1.7.0-openjdk-1.7.0.99-2.6.5.1.el6.x86_64</div></pre></td></tr></table></figure>
<h4 id="CentOs切换用户到root"><a href="#CentOs切换用户到root" class="headerlink" title="CentOs切换用户到root"></a><font color="blue">CentOs切换用户到root</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su root</div></pre></td></tr></table></figure>
<h3 id="下载安装java"><a href="#下载安装java" class="headerlink" title="下载安装java"></a>下载安装java</h3><p>去oracle官网下载相应的java版本,这里选择的是jdk-7u80-linux-x64.rpm版本,当在浏览器中下载时,点击取消,复制其下载地址</p>
<h4 id="终端下载"><a href="#终端下载" class="headerlink" title="终端下载"></a><font color="blue">终端下载</font></h4><p>打开终端,输入<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget xxxx(下载地址)</div><div class="line">wget http://101.44.1.119/files/9067000003768140/download.oracle.com/otn-pub/java/jdk/7u80-b15/jdk-7u80-linux-x64.rpm</div></pre></td></tr></table></figure></p>
<p>下载完成之后,输入ls查看下载目录中多了:jdk-7u80-linux-x64.rpm文件</p>
<h4 id="解压安装"><a href="#解压安装" class="headerlink" title="解压安装"></a><font color="blue">解压安装</font></h4><p>进入jdk下载的目录中输入:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo rpm -ivh jdk-7u80-linux-x64.rpm</div></pre></td></tr></table></figure></p>
<p>等待安装完成,默认安装路径/user/java,进入路径查看<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# cd /usr/java/</div><div class="line">[root@centos-linux java]# ls</div><div class="line">default  jdk1.7.0_80  latest</div></pre></td></tr></table></figure></p>
<h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a><font color="blue">配置环境变量</font></h4><p>进入jdk安装目录:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux java]# cd /usr/java/jdk1.7.0_80/</div><div class="line">[root@centos-linux jdk1.7.0_80]# ls</div><div class="line">bin        lib          src.zip</div><div class="line">COPYRIGHT  LICENSE      THIRDPARTYLICENSEREADME-JAVAFX.txt</div><div class="line">db         man          THIRDPARTYLICENSEREADME.txt</div><div class="line">include    README.html</div><div class="line">jre        release</div></pre></td></tr></table></figure></p>
<p>编辑/etc/profile配置环境变量:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/profile</div></pre></td></tr></table></figure></p>
<p>编辑文件末尾配置:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">for i in /etc/profile.d/*.sh ; do</div><div class="line">    if [ -r &quot;$i&quot; ]; then</div><div class="line">        if [ &quot;$&#123;-#*i&#125;&quot; != &quot;$-&quot; ]; then</div><div class="line">            . &quot;$i&quot;</div><div class="line">        else</div><div class="line">            . &quot;$i&quot; &gt;/dev/null 2&gt;&amp;1</div><div class="line">        fi</div><div class="line">    fi</div><div class="line">done</div><div class="line"></div><div class="line">unset i</div><div class="line">unset -f pathmunge</div><div class="line"></div><div class="line">export JAVA_HOME=/usr/java/jdk1.7.0_80</div><div class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div><div class="line">export PATH=$JAVA_HOME/bin:$PATH</div></pre></td></tr></table></figure></p>
<p>使配置文件立即生效:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux jdk1.7.0_80]# source /etc/profile</div></pre></td></tr></table></figure></p>
<p>至此java安装完成.</p>
<h3 id="下载安装Tomcat"><a href="#下载安装Tomcat" class="headerlink" title="下载安装Tomcat"></a>下载安装Tomcat</h3><h4 id="下载Tomcat"><a href="#下载Tomcat" class="headerlink" title="下载Tomcat"></a><font color="blue">下载Tomcat</font></h4><p>进入我们创建的目录/developer下,进行下载,这里使用的下载地址是:<a href="http://learning.happymmall.com/tomcat/apache-tomcat-7.0.73.tar.gz" target="_blank" rel="external">http://learning.happymmall.com/tomcat/apache-tomcat-7.0.73.tar.gz</a><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux Desktop]# cd /developer/</div><div class="line">[root@centos-linux developer]# ls</div><div class="line">jdk-7u80-linux-x64.rpm</div><div class="line">[root@centos-linux developer]# wget http://learning.happymmall.com/tomcat/apache-tomcat-7.0.73.tar.gz</div></pre></td></tr></table></figure></p>
<h4 id="解压下载的压缩包"><a href="#解压下载的压缩包" class="headerlink" title="解压下载的压缩包"></a><font color="blue">解压下载的压缩包</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf apache-tomcat-7.0.73.tar.gz</div></pre></td></tr></table></figure>
<p>查看解压结果:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# ll</div><div class="line">drwxr-xr-x. 9 root root      4096 Jun  8 00:05 apache-tomcat-7.0.73</div></pre></td></tr></table></figure></p>
<h4 id="修改Tomcat字符集编码"><a href="#修改Tomcat字符集编码" class="headerlink" title="修改Tomcat字符集编码"></a><font color="blue">修改Tomcat字符集编码</font></h4><p>进入到Tomcat目录,编辑conf/server.xml<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo vim conf/server.xml </div><div class="line">-- 找到server.xml文件添加URIEncoding="UTF-8"</div><div class="line">&lt;Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" URIEncoding="UTF-8" /&gt;</div></pre></td></tr></table></figure></p>
<h4 id="启动Tomcat服务器"><a href="#启动Tomcat服务器" class="headerlink" title="启动Tomcat服务器"></a><font color="blue">启动Tomcat服务器</font></h4><p>进入到bin目录执行以下命令,看到started就证明启动成功<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux apache-tomcat-7.0.73]# cd bin/</div><div class="line">[root@centos-linux bin]# ./startup.sh </div><div class="line">Using CATALINA_BASE:   /java_tool/apache-tomcat-7.0.73</div><div class="line">Using CATALINA_HOME:   /java_tool/apache-tomcat-7.0.73</div><div class="line">Using CATALINA_TMPDIR: /java_tool/apache-tomcat-7.0.73/temp</div><div class="line">Using JRE_HOME:        /usr/java/jdk1.7.0_80</div><div class="line">Using CLASSPATH:       /java_tool/apache-tomcat-7.0.73/bin/bootstrap.jar:/java_tool/apache-tomcat-7.0.73/bin/tomcat-juli.jar</div><div class="line">Tomcat started.</div></pre></td></tr></table></figure></p>
<p>访问linux对应的ip地址发现不能访问到Tomcat,这是因为我们没有关闭防火墙,执行以下的命令关闭防火墙后继续访问xxxx:8080发现访问成功.<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux ~]# service iptables stop</div><div class="line">iptables: Setting chains to policy ACCEPT: mangle nat filte[  OK  ]</div><div class="line">iptables: Flushing firewall rules:                         [  OK  ]</div><div class="line">iptables: Unloading modules:                               [  OK  ]</div></pre></td></tr></table></figure></p>
<h3 id="Maven安安装"><a href="#Maven安安装" class="headerlink" title="Maven安安装"></a>Maven安安装</h3><h4 id="Maven下载和解压缩"><a href="#Maven下载和解压缩" class="headerlink" title="Maven下载和解压缩"></a><font color="blue">Maven下载和解压缩</font></h4><p>进入到终端命令行,找到下载源输入以下命令进行下载:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# wget http://learning.happymmall.com/maven/apache-maven-3.0.5-bin.tar.gz</div></pre></td></tr></table></figure></p>
<p>等待下载完毕后解压缩:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# ll</div><div class="line">total 148620</div><div class="line">-rw-r--r--. 1 root root   5144659 Apr 17 12:21 apache-maven-3.0.5-bin.tar.gz</div><div class="line">-rw-r--r--. 1 root root   8938514 Apr 17 12:22 apache-tomcat-7.0.73.tar.gz</div><div class="line">-rw-r--r--. 1 root root 138090286 May 19  2015 jdk-7u80-linux-x64.rpm</div><div class="line">[root@centos-linux developer]# tar -zxvf apache-maven-3.0.5-bin.tar.gz</div></pre></td></tr></table></figure></p>
<p>移动解压好的maven包到指定目录(工具安装包)<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux developer]# mv apache-maven-3.0.5 /java_tool/</div></pre></td></tr></table></figure></p>
<h4 id="配置Maven的环境变量"><a href="#配置Maven的环境变量" class="headerlink" title="配置Maven的环境变量"></a><font color="blue">配置Maven的环境变量</font></h4><p>1.找到maven的解压路径并复制:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /java_tool/apache-maven-3.0.5</div></pre></td></tr></table></figure></p>
<p>2.编辑/etc/profile文件,加入环境变量:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/profile</div></pre></td></tr></table></figure></p>
<p>3.在文件末尾添加如下的配置:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/usr/java/jdk1.7.0_80</div><div class="line">export MAVEN_HOME=/java_tool/apache-maven-3.0.5</div><div class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div><div class="line">export PATH=$JAVA_HOME/bin:$MAVEN_HOME/bin:$PATH</div></pre></td></tr></table></figure></p>
<p>4.使文件立即生效:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux bin]# source /etc/profile</div></pre></td></tr></table></figure></p>
<p>5.验证Maven环境变量:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@centos-linux bin]# mvn -version</div><div class="line">Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 2013-02-19 21:51:28+0800)</div><div class="line">Maven home: /java_tool/apache-maven-3.0.5</div><div class="line">Java version: 1.7.0_80, vendor: Oracle Corporation</div><div class="line">Java home: /usr/java/jdk1.7.0_80/jre</div><div class="line">Default locale: en_US, platform encoding: UTF-8</div><div class="line">OS name: "linux", version: "2.6.32-642.el6.x86_64", arch: "amd64", family: "unix"</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;CentOS常用命令&quot;&gt;&lt;a href=&quot;#CentOS常用命令&quot; class=&quot;headerlink&quot; title=&quot;CentOS常用命令&quot;&gt;&lt;/a&gt;CentOS常用命令&lt;/h3&gt;&lt;h4 id=&quot;CentOs图形界面启动&quot;&gt;&lt;a href=&quot;#CentOs图形界
    
    </summary>
    
      <category term="项目实战" scheme="http://www.fireworm.online/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
    
      <category term="电商后台" scheme="http://www.fireworm.online/tags/%E7%94%B5%E5%95%86%E5%90%8E%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>图解HTTP协议(一)---了解WEB及网络基础</title>
    <link href="http://www.fireworm.online/uncategorized/2017/06/04/%E5%9B%BE%E8%A7%A3HTTP%E5%8D%8F%E8%AE%AE-%E4%B8%80-%E4%BA%86%E8%A7%A3WEB%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html"/>
    <id>http://www.fireworm.online/uncategorized/2017/06/04/图解HTTP协议-一-了解WEB及网络基础.html</id>
    <published>2017-06-04T04:42:25.000Z</published>
    <updated>2017-06-04T04:42:25.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h3><p>协议中存在着各式各样的内存,我们把互联网相关联的协议集合称之为TCP/IP家族.还有一种认为就是TCP/IP是TCP协议家族和IP协议家族的总称.</p>
<h3 id="TCP-IP协议的分层管理"><a href="#TCP-IP协议的分层管理" class="headerlink" title="TCP/IP协议的分层管理"></a>TCP/IP协议的分层管理</h3><p>TCP/IP重要的一点就是分层管理,按照层次可分为四层:应用层,传输层,网络层,数据链路层.</p>
<h4 id="分层的优势"><a href="#分层的优势" class="headerlink" title="分层的优势"></a><font color="blue">分层的优势</font></h4><p>值得一提的是层次化之后,设计也变得简单.处于应用层上的应用可以只考虑分给自己的任务,无需关注其他层的任务,比如数据怎么传输,传输给谁…</p>
<h4 id="应用层的作用"><a href="#应用层的作用" class="headerlink" title="应用层的作用"></a><font color="blue">应用层的作用</font></h4><p>应用层决定了向用户提供服务时的通信服务.TCP/IP家族预存了各种通用的应用服务.比如ftp(文件传输协议),DNS域名解析协议.HTTP协议也属于其中.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;TCP-IP&quot;&gt;&lt;a href=&quot;#TCP-IP&quot; class=&quot;headerlink&quot; title=&quot;TCP/IP&quot;&gt;&lt;/a&gt;TCP/IP&lt;/h3&gt;&lt;p&gt;协议中存在着各式各样的内存,我们把互联网相关联的协议集合称之为TCP/IP家族.还有一种认为就是TCP/IP
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Thinking in Java(二)初始化与清理</title>
    <link href="http://www.fireworm.online/THINKING-IN-JAVA/2017/05/30/Thinking%20in%20Java(%E4%BA%8C)%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E6%B8%85%E7%90%86.html"/>
    <id>http://www.fireworm.online/THINKING-IN-JAVA/2017/05/30/Thinking in Java(二)初始化与清理.html</id>
    <published>2017-05-30T13:51:53.000Z</published>
    <updated>2017-05-30T13:51:53.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="构造方法保证初始化"><a href="#构造方法保证初始化" class="headerlink" title="构造方法保证初始化"></a>构造方法保证初始化</h3><ol>
<li>java会在用户操作对象之前自动调用相应的构造器,从而保证了初始化的进行</li>
<li>构造器是一种特殊的方法,因为它没有返回值,这与返回值void有明显的不通,构造器不会返回任何的东西</li>
</ol>
<h3 id="区分方法的重载"><a href="#区分方法的重载" class="headerlink" title="区分方法的重载"></a>区分方法的重载</h3><h4 id="重载的背景"><a href="#重载的背景" class="headerlink" title="重载的背景:"></a><font color="blue">重载的背景:</font><br></h4><p>在任何的编程语言中,相同的词语可以表达多种不同的含义—它们被重载了</p>
<h4 id="区分重载方法"><a href="#区分重载方法" class="headerlink" title="区分重载方法:"></a><font color="blue">区分重载方法:</font><br></h4><ol>
<li>每个重载的方法都必须有一个独一无二的参数列表</li>
<li>其实参数顺序也可以区分,但是一般不这么做,因为这样使代码难以维护</li>
<li>方法的重载与返回值类型无关</li>
</ol>
<h3 id="this关键字"><a href="#this关键字" class="headerlink" title="this关键字"></a>this关键字</h3><h4 id="代表当前对象的引用"><a href="#代表当前对象的引用" class="headerlink" title="代表当前对象的引用"></a><font color="blue">代表当前对象的引用</font></h4><p>假设你希望在方法的内部获取对当前对象的引用.由于这个引用是由编译器偷偷传递进去的,所以没有什么标识符可用;因此为了表示当前对象的引用,java引入了this关键字,它代表对当前对象的引用<br><br>如果方法要返回当前对象的引用:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Leaf</span> </span>&#123;</div><div class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">  <span class="function">Leaf <span class="title">increament</span><span class="params">()</span> </span>&#123;</div><div class="line">    i++;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="在构造器中调用构造器"><a href="#在构造器中调用构造器" class="headerlink" title="在构造器中调用构造器"></a><font color="blue">在构造器中调用构造器</font></h4><p>如果在构造器中需要调用其他的构造器,我们就可以使用this(param1, param2, …)的形式进行调用</p>
<h3 id="垃圾回收器如何工作"><a href="#垃圾回收器如何工作" class="headerlink" title="垃圾回收器如何工作"></a>垃圾回收器如何工作</h3><p>在C和C++语言中在堆内存上分配对象是非常昂贵的;然而,垃圾回收器提高了对象分配的效率,存储空间的释放会影响存储空间的分配.这也意味着java从堆内存分配空间的速度可以和其他语言从堆栈上分配的速度相媲美.</p>
<h4 id="垃圾回收—引用计数器算法"><a href="#垃圾回收—引用计数器算法" class="headerlink" title="垃圾回收—引用计数器算法"></a><font color="blue">垃圾回收—引用计数器算法</font></h4><p>引用计数器是一种简单但是速度很慢的垃圾回收技术:每个对象都含有一个引用计数器,当有引用链接到对象时计数器+1.当有引用离开对象或者置为null时,引用计数器-1.垃圾回收器会在全部对象的列表上遍历,当发现某个对象的引用计数器是0的时候,就释放其所占用的空间.引用计数器尝尝用来说明垃圾回收器的工作方式,但是从未应用于任何一种java虚拟机中.</p>
<h4 id="垃圾回收—停止-复制"><a href="#垃圾回收—停止-复制" class="headerlink" title="垃圾回收—停止-复制"></a><font color="blue">垃圾回收—停止-复制</font></h4><p>在一些更快的模式中,垃圾回收并非采用引用计数的模式.他们的依据思想是:<br>对于任何活的对象,一定能最终追溯到其存活的堆栈或者静态区域中的引用.对于如何找到存活的对象,不同的虚拟机实现不同,有一种做法是停止-复制:显然这种做法是先停止程序的运行,然后将存活的对象复制到另外的一块空间中.</p>
<h5 id="停止-复制算法的弊端"><a href="#停止-复制算法的弊端" class="headerlink" title="停止-复制算法的弊端"></a><font color="red">停止-复制算法的弊端</font></h5><ol>
<li>把对象从一处搬运到另外一处,所指向它的引用都必须进行修正.</li>
<li>需要两个分离的堆内存之间进行倒腾</li>
<li>程序稳定之后可能产生少量的垃圾甚至没有垃圾,但是还是会停止-复制</li>
</ol>
<h4 id="垃圾回收—标记-清扫"><a href="#垃圾回收—标记-清扫" class="headerlink" title="垃圾回收—标记-清扫"></a><font color="blue">垃圾回收—标记-清扫</font></h4><p>为了避免上面停止-复制产生的弊端,又提出来了另外的一种模式:标记-清扫.早起sun公司的虚拟机就采用了这个.标记-清扫所依据的思想仍然是从堆栈和存储区域触发,遍历所有的引用,进而找到所有存活的对象,每当它找到一个就会打一个标记,这个过程不会回收任何的对象,只有全部标记完成之后,清理动作才会开始,在清理的过程中没有打标记的对象将会被释放,不会发生任何的复制动作,同停止-复制一样标记-清扫不是在后台运行的,也必须得停止程序.</p>
<h5 id="标记-清扫算法的弊端"><a href="#标记-清扫算法的弊端" class="headerlink" title="标记-清扫算法的弊端"></a><font color="red">标记-清扫算法的弊端</font></h5><ol>
<li>垃圾清除之后剩下的堆内存不是连续的</li>
<li>一般标记-清扫速度非常慢,之后当产生垃圾非常少或者不产生垃圾的时候,它的速度就很快了</li>
</ol>
<h3 id="综合考虑—自适应"><a href="#综合考虑—自适应" class="headerlink" title="综合考虑—自适应"></a>综合考虑—自适应</h3><p>其实上面的暂停-复制和标记-清扫两种算法在虚拟机中都会用到.java虚拟机会进行自动监视:如果内存对象变动比较大,出现很多内存碎片,有大块的内存需要回收就采用停止-复制算法;但是当虚拟机发现所有的对象都很稳定,垃圾回收的速率比较低,就会切换到标记-清扫方式.这种自我调节的方式就是自适应技术.</p>
<h3 id="静态初始化"><a href="#静态初始化" class="headerlink" title="静态初始化"></a>静态初始化</h3><p>无论创建多少个对象,静态数据只会占用一份存储空间.static关键字不能用于局部变量</p>
<h4 id="静态数据初始化时机"><a href="#静态数据初始化时机" class="headerlink" title="静态数据初始化时机"></a><font color="blue">静态数据初始化时机</font></h4><p>当首次生成这个类的一个对象时或者首次访问那个类的静态数据成员时,进行静态区域的加载</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;构造方法保证初始化&quot;&gt;&lt;a href=&quot;#构造方法保证初始化&quot; class=&quot;headerlink&quot; title=&quot;构造方法保证初始化&quot;&gt;&lt;/a&gt;构造方法保证初始化&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;java会在用户操作对象之前自动调用相应的构造器,从而保证了初始化的进行
    
    </summary>
    
      <category term="THINKING IN JAVA" scheme="http://www.fireworm.online/categories/THINKING-IN-JAVA/"/>
    
    
      <category term="读书笔记" scheme="http://www.fireworm.online/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>FLOWABLE---配置</title>
    <link href="http://www.fireworm.online/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/2017/05/27/%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E-%E9%85%8D%E7%BD%AE.html"/>
    <id>http://www.fireworm.online/流程引擎/2017/05/27/工作流引擎-配置.html</id>
    <published>2017-05-27T10:06:52.000Z</published>
    <updated>2017-05-27T10:06:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>SpringConfig配置文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:applicationContext-base.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:applicationContext-persistence.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:applicationContext-confplusclient.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:applicationContext-httpclient.xml"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.apache.tomcat.jdbc.pool.DataSource"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;mysql.driver&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://$&#123;mysql.address.flowengine&#125;/flow_engine?useUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;autoReconnect=true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;mysql.username.flowengine&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;mysql.password.flowengine&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialSize"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.connection.initialSize&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minIdle"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.connection.minIdle&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxActive"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.connection.maxActive&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxWait"</span> <span class="attr">value</span>=<span class="string">"60000"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeBetweenEvictionRunsMillis"</span> <span class="attr">value</span>=<span class="string">"60000"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minEvictableIdleTimeMillis"</span> <span class="attr">value</span>=<span class="string">"300000"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultTransactionIsolation"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"validationQuery"</span> <span class="attr">value</span>=<span class="string">"SELECT 'x'"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testWhileIdle"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testOnBorrow"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testOnReturn"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"removeAbandoned"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"removeAbandonedTimeout"</span> <span class="attr">value</span>=<span class="string">"600"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"logAbandoned"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcInterceptors"</span> <span class="attr">value</span>=<span class="string">"ConnectionState;StatementFinalizer"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"location"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:spring-config.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"taskExecutor"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor"</span> <span class="attr">lazy-init</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"corePoolSize"</span> <span class="attr">value</span>=<span class="string">"10"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span> <span class="attr">value</span>=<span class="string">"50"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"queueCapacity"</span> <span class="attr">value</span>=<span class="string">"1000"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"keepAliveSeconds"</span> <span class="attr">value</span>=<span class="string">"300"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"rejectedExecutionHandler"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"java.util.concurrent.ThreadPoolExecutor$DiscardPolicy"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"confplusUrl"</span> <span class="attr">class</span>=<span class="string">"java.lang.String"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">"$&#123;url.confplus&#125;"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 配置processEngineConfigeration --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"processEngineConfiguration"</span> <span class="attr">class</span>=<span class="string">"org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span></span></div><div class="line">                  <span class="attr">value</span>=<span class="string">"jdbc:mysql://$&#123;mysql.address.flowengine&#125;/flow_engine?useUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;autoReconnect=true"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUsername"</span> <span class="attr">value</span>=<span class="string">"$&#123;mysql.username.flowengine&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcPassword"</span> <span class="attr">value</span>=<span class="string">"$&#123;mysql.password.flowengine&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcDriver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"databaseSchemaUpdate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"activityFontName"</span> <span class="attr">value</span>=<span class="string">"思源黑体"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"labelFontName"</span> <span class="attr">value</span>=<span class="string">"思源黑体"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"processEngine"</span> <span class="attr">class</span>=<span class="string">"org.flowable.spring.ProcessEngineFactoryBean"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"processEngineConfiguration"</span> <span class="attr">ref</span>=<span class="string">"processEngineConfiguration"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"repositoryService"</span> <span class="attr">factory-bean</span>=<span class="string">"processEngine"</span> <span class="attr">factory-method</span>=<span class="string">"getRepositoryService"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"runtimeService"</span> <span class="attr">factory-bean</span>=<span class="string">"processEngine"</span> <span class="attr">factory-method</span>=<span class="string">"getRuntimeService"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"taskService"</span> <span class="attr">factory-bean</span>=<span class="string">"processEngine"</span> <span class="attr">factory-method</span>=<span class="string">"getTaskService"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"idmIdentityService"</span> <span class="attr">factory-bean</span>=<span class="string">"processEngine"</span> <span class="attr">factory-method</span>=<span class="string">"getIdmIdentityService"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"historyService"</span> <span class="attr">factory-bean</span>=<span class="string">"processEngine"</span> <span class="attr">factory-method</span>=<span class="string">"getHistoryService"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"managementService"</span> <span class="attr">factory-bean</span>=<span class="string">"processEngine"</span> <span class="attr">factory-method</span>=<span class="string">"getManagementService"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"identityService"</span> <span class="attr">factory-bean</span>=<span class="string">"processEngine"</span> <span class="attr">factory-method</span>=<span class="string">"getIdentityService"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"268435456"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="Delegator调用外部接口"><a href="#Delegator调用外部接口" class="headerlink" title="Delegator调用外部接口"></a>Delegator调用外部接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Caijiajia confidential</div><div class="line"> * &lt;p&gt;</div><div class="line"> * Copyright (C) 2017 Shanghai Shuhe Co., Ltd. All rights reserved.</div><div class="line"> * &lt;p&gt;</div><div class="line"> * No parts of this file may be reproduced or transmitted in any form or by any means,</div><div class="line"> * electronic, mechanical, photocopying, recording, or otherwise, without prior written</div><div class="line"> * permission of Shanghai Shuhe Co., Ltd.</div><div class="line"> */</div><div class="line"><span class="keyword">package</span> cn.caijiajia.flowengine.delegator;</div><div class="line"></div><div class="line"><span class="keyword">import</span> cn.caijiajia.flowengine.configuration.Configs;</div><div class="line"><span class="keyword">import</span> cn.caijiajia.flowengine.domain.DelegateDestination;</div><div class="line"><span class="keyword">import</span> cn.caijiajia.flowengine.util.HttpClientUtil;</div><div class="line"><span class="keyword">import</span> cn.caijiajia.framework.httpclient.HttpClientTemplate;</div><div class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</div><div class="line"><span class="keyword">import</span> org.flowable.engine.RuntimeService;</div><div class="line"><span class="keyword">import</span> org.flowable.engine.delegate.DelegateExecution;</div><div class="line"><span class="keyword">import</span> org.flowable.engine.delegate.Expression;</div><div class="line"><span class="keyword">import</span> org.flowable.engine.delegate.JavaDelegate;</div><div class="line"><span class="keyword">import</span> org.slf4j.Logger;</div><div class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by Harry on 2017/4/19.</div><div class="line"> */</div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpClientDelegator</span> <span class="keyword">implements</span> <span class="title">JavaDelegate</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(HttpClientDelegator.class);</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> Configs configs;</div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> RuntimeService runtimeService;</div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> HttpClientTemplate httpClientTemplate;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Expression destinationKey;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(DelegateExecution execution)</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            String processInstanceId = execution.getProcessInstanceId();</div><div class="line">            Map&lt;String, Object&gt; variables = runtimeService.getVariables(processInstanceId);</div><div class="line"></div><div class="line">            String key = (String) destinationKey.getValue(execution);</div><div class="line">            <span class="keyword">if</span> (StringUtils.isBlank(key)) &#123;</div><div class="line">                logger.error(<span class="string">"Unable to find destination key to get a valid delegate destination!"</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            Map&lt;String, DelegateDestination&gt; destinations = configs.getDelegateDestinations();</div><div class="line">            DelegateDestination destination = destinations.get(key);</div><div class="line">            <span class="keyword">if</span> (destination == <span class="keyword">null</span>) &#123;</div><div class="line">                logger.error(<span class="string">"Check if delegate destination has been configured in confplus!"</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            String uri = HttpClientUtil.construct(destination.getForwardUri(), variables);</div><div class="line">            Map&lt;String, String&gt; params = HttpClientUtil.validParams(destination.getParamsList(), variables);</div><div class="line"></div><div class="line">            <span class="keyword">switch</span> (destination.getRequestMethod()) &#123;</div><div class="line">                <span class="keyword">case</span> <span class="string">"GET"</span>:</div><div class="line">                    httpClientTemplate.doGet(uri, params);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">"POST"</span>:</div><div class="line">                    httpClientTemplate.doPost(uri, params);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">"PUT"</span>:</div><div class="line">                    httpClientTemplate.doPut(uri, params);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">"DELETE"</span>:</div><div class="line">                    httpClientTemplate.doDelete(uri, params);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">default</span>:</div><div class="line">                    logger.error(<span class="string">"Http method "</span> + destination.getRequestMethod() + <span class="string">" in process instance "</span> + processInstanceId + <span class="string">"is not supported."</span>);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            logger.error(<span class="string">"Failed to send request external to uri."</span>, e);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SpringConfig配置文件&lt;br&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;d
    
    </summary>
    
      <category term="流程引擎" scheme="http://www.fireworm.online/categories/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
    
      <category term="流程引擎" scheme="http://www.fireworm.online/tags/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>工作流引擎---TASK</title>
    <link href="http://www.fireworm.online/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/2017/05/27/%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E-TASK.html"/>
    <id>http://www.fireworm.online/流程引擎/2017/05/27/工作流引擎-TASK.html</id>
    <published>2017-05-27T07:35:59.000Z</published>
    <updated>2017-05-27T07:35:59.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="条件查询获取任务"><a href="#条件查询获取任务" class="headerlink" title="条件查询获取任务"></a>条件查询获取任务</h3><p><img src="http://oayt7zau6.bkt.clouddn.com/%E6%88%91%E7%9A%84%E5%AE%A1%E6%A0%B8%E6%9D%A1%E4%BB%B6.jpg" alt="image description"></p>
<ol>
<li>name—根据事件名称模糊查询</li>
<li>status—根据事件状态查询</li>
<li>type根据事件类型查询</li>
</ol>
<p>Controller层实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/auditTasks"</span>, method = RequestMethod.GET)</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getAuditEvents</span><span class="params">(String name, String status, String type,</span></span></div><div class="line">                                          @RequestParam(defaultValue = <span class="string">"1"</span>)<span class="keyword">int</span> pageNo, @<span class="title">RequestParam</span><span class="params">(defaultValue = <span class="string">"20"</span>)</span> <span class="keyword">int</span> pageSize) &#123;</div><div class="line">    <span class="keyword">return</span> taskService.getAuditEvents(name, status, type, pageNo, pageSize);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>查看我的待审核列表—这里分页为静态分页,有问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 待审核列表</div><div class="line"> *</div><div class="line"> * @param name</div><div class="line"> * @param status</div><div class="line"> * @param type</div><div class="line"> */</div><div class="line">public Map&lt;String, Object&gt; getAuditEvents(String name, String status, String type, int pageNo, int pageSize) &#123;</div><div class="line">    Map&lt;String, Object&gt; map = Maps.newHashMap();</div><div class="line">    try &#123;</div><div class="line">        List&lt;String&gt; processIdLists = Lists.newArrayList();</div><div class="line">        List&lt;Map&lt;String, Object&gt;&gt; auditList = Lists.newArrayList();</div><div class="line">        Map&lt;String, String&gt; taskProcessIdMap = Maps.newLinkedHashMap();</div><div class="line"></div><div class="line">        //根据人查询人所在的组</div><div class="line">        String assignee = ParameterThreadLocal.getUid();</div><div class="line">        List&lt;Group&gt; groupList = identityService.createGroupQuery().groupMember(assignee).list();</div><div class="line">        List&lt;String&gt; groupIdList = Lists.newArrayList();</div><div class="line">        for (Group groupIds : groupList) &#123;</div><div class="line">            groupIdList.add(groupIds.getId());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        //记录分页总数</div><div class="line">        TaskQuery taskQuery = taskService.createTaskQuery().taskCandidateGroupIn(groupIdList).orderByTaskCreateTime().desc();</div><div class="line"></div><div class="line">        //分页 listPage自带的方法不满足分页,需要手动拼成分页</div><div class="line">        List&lt;Task&gt; taskList = taskQuery.listPage((pageNo - 1) == 0 ? 0 : (pageNo - 1) * pageSize, pageSize);</div><div class="line">        if (taskList != null &amp;&amp; taskList.size() &gt; 0) &#123;</div><div class="line">            for (Task task : taskList) &#123;</div><div class="line">                processIdLists.add(task.getProcessInstanceId());</div><div class="line">                taskProcessIdMap.put(task.getProcessInstanceId(), task.getId());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if (processIdLists != null &amp;&amp; processIdLists.size() &gt; 0) &#123;</div><div class="line">            for (String processId : processIdLists) &#123;</div><div class="line">                ProcessInstanceQuery processQuery = runtimeService.createProcessInstanceQuery().processInstanceId(processId);</div><div class="line">                if (StringUtils.isNotBlank(name)) &#123; //模糊查询,需要手动添加 %</div><div class="line">                    processQuery.variableValueLikeIgnoreCase(&quot;name&quot;, &quot;%&quot; + name + &quot;%&quot;);</div><div class="line">                &#125;</div><div class="line">                // 目前全部为待审核状态,无需过滤</div><div class="line">//                    if (StringUtils.isNotBlank(status)) &#123;</div><div class="line">//                        processQuery.variableValueEqualsIgnoreCase(&quot;status&quot;, status);</div><div class="line">//                    &#125;</div><div class="line">                if (StringUtils.isNotBlank(type)) &#123;</div><div class="line">                    processQuery.variableValueEqualsIgnoreCase(&quot;type&quot;, type);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                List&lt;ProcessInstance&gt; processInstanceList = processQuery.list();</div><div class="line">                //封装返回数据</div><div class="line">                for (ProcessInstance processInstance : processInstanceList) &#123;</div><div class="line">                    Map&lt;String, Object&gt; maps = runtimeService.getVariables(processInstance.getId());</div><div class="line"></div><div class="line">                    Map&lt;String, Object&gt; resultMap = Maps.newLinkedHashMap();</div><div class="line">                    for (Map.Entry entry : maps.entrySet()) &#123;</div><div class="line">                        resultMap.put(String.valueOf(entry.getKey()), entry.getValue());</div><div class="line">                    &#125;</div><div class="line">                    resultMap.put(&quot;taskId&quot;, Integer.valueOf(taskProcessIdMap.get(processId)));</div><div class="line">                    //目前全部为待审核</div><div class="line">                    resultMap.put(&quot;status&quot;, ApprovalStatus.STATUS_APPROVING);</div><div class="line">                    auditList.add(resultMap);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        map.put(&quot;total&quot;, taskQuery.count());</div><div class="line">        map.put(&quot;data&quot;, auditList);</div><div class="line">    &#125; catch (Exception e) &#123;</div><div class="line">        logger.warn(&quot;Get audit events failed. error = &quot;, e);</div><div class="line">    &#125;</div><div class="line">    return map;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="获取已驳回任务"><a href="#获取已驳回任务" class="headerlink" title="获取已驳回任务"></a>获取已驳回任务</h3><p>Controller实现—权限控制,只有发起人才能看到自己驳回的任务<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/rejectTasks"</span>, method = RequestMethod.GET)</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getRejectTasks</span><span class="params">(String eventName, String eventType, String processDefinitionKey)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> taskService.getRejectTasksByApplyer(eventName, eventType, processDefinitionKey);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Service实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 查询驳回任务</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> eventName</div><div class="line"> * <span class="doctag">@param</span> eventType</div><div class="line"> * <span class="doctag">@param</span> processDefinitionKey</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getRejectTasksByApplyer</span><span class="params">(String eventName, String eventType, String</span></span></div><div class="line">        processDefinitionKey) &#123;</div><div class="line"></div><div class="line">    Map&lt;String, Object&gt; map = Maps.newHashMap();</div><div class="line">    List&lt;RejectTaskVo&gt; rejectTaskVoList = Lists.newArrayList();</div><div class="line">    String userId = ParameterThreadLocal.getUid();</div><div class="line"></div><div class="line">    <span class="comment">/* 获取所有发起者是登录人的流程 */</span></div><div class="line">    ProcessInstanceQuery processQuery = runtimeService.createProcessInstanceQuery().processDefinitionKey(processDefinitionKey)</div><div class="line">            .variableValueEqualsIgnoreCase(<span class="string">"starter"</span>, userId);</div><div class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(eventName)) &#123;</div><div class="line">        processQuery.variableValueLikeIgnoreCase(<span class="string">"name"</span>, <span class="string">"%"</span> + eventName + <span class="string">"%"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(eventType)) &#123;</div><div class="line">        processQuery.variableValueLikeIgnoreCase(<span class="string">"type"</span>, <span class="string">"%"</span> + eventType + <span class="string">"%"</span>);</div><div class="line">    &#125;</div><div class="line">    List&lt;ProcessInstance&gt; processInstanceList = processQuery.list();</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (ProcessInstance processInstance : processInstanceList) &#123;</div><div class="line">        List&lt;Comment&gt; comments = taskService.getProcessInstanceComments(processInstance.getId());</div><div class="line">        <span class="keyword">if</span> (!comments.isEmpty() &amp;&amp; <span class="string">"reject"</span>.equals(comments.get(<span class="number">0</span>).getType())) &#123;</div><div class="line">            String currentTaskId = taskService.createTaskQuery().processInstanceId(processInstance.getId()).orderByTaskCreateTime().asc().listPage(<span class="number">0</span>, <span class="number">1</span>).get(<span class="number">0</span>).getId();</div><div class="line">            Comment comment = comments.get(comments.size() - <span class="number">1</span>);</div><div class="line">            Map variables = runtimeService.getVariables(processInstance.getId());</div><div class="line">            RejectTaskVo rejectTaskVo = <span class="keyword">new</span> RejectTaskVo();</div><div class="line">            rejectTaskVo.setEventId(Integer.valueOf((String) variables.get(<span class="string">"id"</span>)));</div><div class="line">            rejectTaskVo.setEventName((String) variables.get(<span class="string">"name"</span>));</div><div class="line">            rejectTaskVo.setEventType((String) variables.get(<span class="string">"type"</span>));</div><div class="line">            rejectTaskVo.setCurrentTaskId(currentTaskId);</div><div class="line">            rejectTaskVo.setRejectPerson(comment.getUserId());</div><div class="line">            rejectTaskVo.setRejectTaskId(comment.getTaskId());</div><div class="line">            rejectTaskVo.setRejectTime(comment.getTime());</div><div class="line">            rejectTaskVo.setVariables(variables);</div><div class="line">            rejectTaskVoList.add(rejectTaskVo);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    map.put(<span class="string">"rejectTasks"</span>, rejectTaskVoList);</div><div class="line">    <span class="keyword">return</span> map;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="获取某个任务的评论"><a href="#获取某个任务的评论" class="headerlink" title="获取某个任务的评论"></a>获取某个任务的评论</h3><p>Controller实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/getComment"</span>, method = RequestMethod.GET)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getComment</span><span class="params">(String taskId)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> taskService.getCommentMessageByTaskId(taskId);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Service实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 根据taskId获取流程评论信息</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> taskId</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getCommentMessageByTaskId</span><span class="params">(String taskId)</span> </span>&#123;</div><div class="line"></div><div class="line">    Comment comment = getCommentByTaskId(taskId);</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == comment) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> comment.getFullMessage();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 根据taskId获取流程评论</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> taskId</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> Comment <span class="title">getCommentByTaskId</span><span class="params">(String taskId)</span> </span>&#123;</div><div class="line">    </div><div class="line">    List&lt;Comment&gt; commentList = taskService.getTaskComments(taskId, <span class="string">"reject"</span>);</div><div class="line">    <span class="keyword">if</span>(commentList.isEmpty()) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> commentList.get(<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="驳回任务事件"><a href="#驳回任务事件" class="headerlink" title="驳回任务事件"></a>驳回任务事件</h3><p>Controller实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 驳回任务</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> taskId</div><div class="line"> * <span class="doctag">@param</span> completeTaskForm</div><div class="line"> */</div><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/&#123;taskId&#125;/reverse"</span>, method = RequestMethod.POST)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">rejectTask</span><span class="params">(@PathVariable String taskId, @RequestBody CompleteTaskForm completeTaskForm)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> taskService.rejectTask(taskId, completeTaskForm);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Service实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 驳回</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> taskId</div><div class="line"> * <span class="doctag">@param</span> completeTaskForm</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">rejectTask</span><span class="params">(String taskId, CompleteTaskForm completeTaskForm)</span> </span>&#123;</div><div class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    <span class="keyword">if</span> (StringUtils.isNotBlank(taskId) &amp;&amp; <span class="keyword">null</span> != completeTaskForm) &#123;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isBlank(completeTaskForm.getComment())) &#123; <span class="comment">//驳回的时候,驳回原因为必填项</span></div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> CjjClientException(ErrorCodes.ERR_REJECT_COMMENT_FAILED, ErrorMsgs.ERR_REVERSE_COMMENT_MSG);</div><div class="line">        &#125;</div><div class="line">        String processInstanceId = taskService.createTaskQuery().taskId(taskId).singleResult().getProcessInstanceId();</div><div class="line"></div><div class="line">        String actor = ParameterThreadLocal.getUid();</div><div class="line">        <span class="comment">//添加当前任务的完成者</span></div><div class="line">        Authentication.setAuthenticatedUserId(actor);</div><div class="line">        <span class="comment">//添加批注信息</span></div><div class="line">        taskService.addComment(taskId, processInstanceId, <span class="string">"reject"</span>, completeTaskForm.getComment());</div><div class="line">        String taskDefinitionKey = taskService.createTaskQuery().taskId(taskId).singleResult().getTaskDefinitionKey();</div><div class="line">        map.put(taskDefinitionKey + <span class="string">"_message"</span>, <span class="string">"no"</span>);</div><div class="line"></div><div class="line">        <span class="comment">//完成任务</span></div><div class="line">        taskService.complete(taskId, map);</div><div class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="完成任务实现"><a href="#完成任务实现" class="headerlink" title="完成任务实现"></a>完成任务实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 完成任务</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> taskId</div><div class="line"> * <span class="doctag">@param</span> completeTaskForm</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">completeTask</span><span class="params">(String taskId, CompleteTaskForm completeTaskForm)</span> </span>&#123;</div><div class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    <span class="keyword">if</span> (StringUtils.isNotBlank(taskId) &amp;&amp; <span class="keyword">null</span> != completeTaskForm) &#123;</div><div class="line">        String processInstanceId = taskService.createTaskQuery().taskId(taskId).singleResult().getProcessInstanceId();</div><div class="line">        <span class="comment">//添加当前任务的完成者</span></div><div class="line">        String actor = ParameterThreadLocal.getUid();</div><div class="line">        Authentication.setAuthenticatedUserId(actor);</div><div class="line">        taskService.addComment(taskId, processInstanceId, <span class="string">"complete"</span>, <span class="string">"已完成"</span>);</div><div class="line">        String taskDefinitionKey = taskService.createTaskQuery().taskId(taskId).singleResult().getTaskDefinitionKey();</div><div class="line">        map.put(taskDefinitionKey + <span class="string">"_message"</span>, <span class="string">"yes"</span>);</div><div class="line">        <span class="comment">//将可能更新后的变量放入变量列表中</span></div><div class="line">        <span class="keyword">if</span> (completeTaskForm.getVariables() != <span class="keyword">null</span> &amp;&amp; completeTaskForm.getVariables().size() &gt; <span class="number">0</span>) &#123;</div><div class="line">            map.putAll(completeTaskForm.getVariables());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//完成任务</span></div><div class="line">        taskService.complete(taskId, map);</div><div class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;条件查询获取任务&quot;&gt;&lt;a href=&quot;#条件查询获取任务&quot; class=&quot;headerlink&quot; title=&quot;条件查询获取任务&quot;&gt;&lt;/a&gt;条件查询获取任务&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://oayt7zau6.bkt.clouddn.com/%E6
    
    </summary>
    
      <category term="流程引擎" scheme="http://www.fireworm.online/categories/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
    
      <category term="流程引擎" scheme="http://www.fireworm.online/tags/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>工作流引擎---EXCUTION</title>
    <link href="http://www.fireworm.online/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/2017/05/27/%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E-EXCUTION.html"/>
    <id>http://www.fireworm.online/流程引擎/2017/05/27/工作流引擎-EXCUTION.html</id>
    <published>2017-05-27T06:59:30.000Z</published>
    <updated>2017-05-27T06:59:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>EXCUTION其实就是流程启动后对应的一个实例,每一个流程对应一个,在一个独立的流程中process(excution)–ID是唯一的</p>
<h3 id="启动流程实例"><a href="#启动流程实例" class="headerlink" title="启动流程实例"></a>启动流程实例</h3><p>当我们部署好了之后就需要来启动流程实例,当我们以key的方式启动时,默认的会启动最后一次的部署<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String processDefinitionKey = <span class="string">"helloActivitiProcess"</span>;</div><div class="line">ProcessInstance pi = processEngine.getRuntimeService().startProcessInstanceByKey(processDefinitionKey);</div></pre></td></tr></table></figure></p>
<h3 id="获取流程图-并高亮节点"><a href="#获取流程图-并高亮节点" class="headerlink" title="获取流程图,并高亮节点"></a>获取流程图,并高亮节点</h3><p>当我们流程启动并在运行的节点中,这时候为了全局的观测流程运行的进度,就需要以流程图片的方式展现,并且当前节点需要高亮.Controller层实现:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 获取流程框图</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> processInstanceId</div><div class="line"> * <span class="doctag">@param</span> response</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/&#123;processInstanceId&#125;/diagram"</span>, method = RequestMethod.GET)</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getProcessDiagram</span><span class="params">(@PathVariable String processInstanceId, HttpServletResponse response)</span> </span>&#123;</div><div class="line">    Map&lt;String, Object&gt; processDiagram = processInstanceService.getProcessDiagram(processInstanceId);</div><div class="line">    <span class="keyword">if</span> (processDiagram != <span class="keyword">null</span> &amp;&amp; processDiagram.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">        String pngName = <span class="string">"flowengine-"</span>+ processInstanceId +<span class="string">".png"</span>;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank((String) processDiagram.get(<span class="string">"pngName"</span>))) &#123;</div><div class="line">            pngName = (String) processDiagram.get(<span class="string">"pngName"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (processDiagram.get(<span class="string">"pngStream"</span>) != <span class="keyword">null</span>) &#123;</div><div class="line">            processInstanceService.downFile((InputStream) processDiagram.get(<span class="string">"pngStream"</span>), pngName, response);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><font color="red">rocessInstanceService.getProcessDiagram(processInstanceId);</font>方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 获取流程状态图形化展示</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> processInstanceId</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getProcessDiagram</span><span class="params">(String processInstanceId)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (StringUtils.isNotBlank(processInstanceId)) &#123;</div><div class="line">        Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</div><div class="line">        TaskQuery query = taskService.createTaskQuery();</div><div class="line">        Task task = query.processInstanceId(processInstanceId).singleResult();</div><div class="line">        <span class="keyword">if</span> (task != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="comment">//获取下载文件名称</span></div><div class="line">            ProcessInstance instance = runtimeService.createProcessInstanceQuery()</div><div class="line">                    .processInstanceId(processInstanceId).singleResult();</div><div class="line">            ProcessDefinition definition = repositoryService.getProcessDefinition(instance.getProcessDefinitionId());</div><div class="line">            <span class="keyword">if</span> (definition != <span class="keyword">null</span>) &#123;</div><div class="line">                result.put(<span class="string">"pngName"</span>, definition.getDiagramResourceName());</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// 获取活动节点</span></div><div class="line">            BpmnModel bpmnModel = repositoryService.getBpmnModel(task.getProcessDefinitionId());</div><div class="line">            List&lt;String&gt; activityIds = runtimeService.getActiveActivityIds(task.getExecutionId());</div><div class="line">            InputStream inputStream = processEngine.getProcessEngineConfiguration()</div><div class="line">                    .getProcessDiagramGenerator()</div><div class="line">                    .generateDiagram(bpmnModel, <span class="string">"png"</span>, activityIds, <span class="keyword">new</span> ArrayList(),</div><div class="line">                            processEngine.getProcessEngineConfiguration().getActivityFontName(),</div><div class="line">                            processEngine.getProcessEngineConfiguration().getLabelFontName(), <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="number">1.0</span>);</div><div class="line">            result.put(<span class="string">"pngStream"</span>, inputStream);</div><div class="line">            <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>下载图片方法:<font color="red">processInstanceService.downFile</font><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 下载png图片</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> pngStream</div><div class="line"> * <span class="doctag">@param</span> response</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downFile</span><span class="params">(InputStream pngStream, String pngName, HttpServletResponse response)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (pngStream != <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">        BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(pngStream);</div><div class="line">        OutputStream os = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        response.setContentType(<span class="string">"image/png"</span>);</div><div class="line">        response.addHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment;fileName="</span> + pngName);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            os = response.getOutputStream();</div><div class="line">            <span class="keyword">int</span> i = bis.read(buffer);</div><div class="line">            <span class="keyword">while</span> (i != -<span class="number">1</span>) &#123;</div><div class="line">                os.write(buffer, <span class="number">0</span>, i);</div><div class="line">                i = bis.read(buffer);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            logger.error(<span class="string">"output image error"</span>, e);</div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            <span class="keyword">if</span> (os != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    os.close();</div><div class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">                    logger.warn(<span class="string">"close stream resource failed "</span>, e);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (bis != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    bis.close();</div><div class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">                    logger.warn(<span class="string">"close stream resource failed "</span>, e);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="根据条件查询流程实例"><a href="#根据条件查询流程实例" class="headerlink" title="根据条件查询流程实例"></a>根据条件查询流程实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 查询processIntances</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> queryRequest</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> List&lt;ProcessInstanceVo&gt; <span class="title">queryProcessInstances</span><span class="params">(ProcessInstanceQueryForm queryRequest)</span> </span>&#123;</div><div class="line">    ProcessInstanceQuery query = runtimeService.createProcessInstanceQuery();</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (queryRequest.getProcessInstanceId() != <span class="keyword">null</span>) &#123;</div><div class="line">        query.processInstanceId(queryRequest.getProcessInstanceId());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (queryRequest.getProcessDefinitionKey() != <span class="keyword">null</span>) &#123;</div><div class="line">        query.processDefinitionKey(queryRequest.getProcessDefinitionKey());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (queryRequest.getProcessDefinitionId() != <span class="keyword">null</span>) &#123;</div><div class="line">        query.processDefinitionId(queryRequest.getProcessDefinitionId());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (queryRequest.getProcessBusinessKey() != <span class="keyword">null</span>) &#123;</div><div class="line">        query.processInstanceBusinessKey(queryRequest.getProcessBusinessKey());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (queryRequest.getVariables() != <span class="keyword">null</span>) &#123;</div><div class="line">        addVariables(query, queryRequest.getVariables());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    List&lt;ProcessInstanceVo&gt; instanceList = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    List&lt;ProcessInstance&gt; processInstances = query.list();</div><div class="line">    <span class="keyword">for</span> (ProcessInstance processInstance : processInstances) &#123;</div><div class="line">        ProcessInstanceVo processInstanceVo = <span class="keyword">new</span> ProcessInstanceVo();</div><div class="line"></div><div class="line">        processInstanceVo.setProcessInstanceId(processInstance.getProcessInstanceId());</div><div class="line">        processInstanceVo.setProcessDefinitionId(processInstance.getProcessDefinitionId());</div><div class="line">        processInstanceVo.setProcessDefinitionKey(processInstance.getProcessDefinitionKey());</div><div class="line">        processInstanceVo.setProcessBusinessKey(processInstance.getBusinessKey());</div><div class="line">        processInstanceVo.setVariables(processInstance.getProcessVariables());</div><div class="line"></div><div class="line">        instanceList.add(processInstanceVo);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> instanceList;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;EXCUTION其实就是流程启动后对应的一个实例,每一个流程对应一个,在一个独立的流程中process(excution)–ID是唯一的&lt;/p&gt;
&lt;h3 id=&quot;启动流程实例&quot;&gt;&lt;a href=&quot;#启动流程实例&quot; class=&quot;headerlink&quot; title=&quot;启动流程
    
    </summary>
    
      <category term="流程引擎" scheme="http://www.fireworm.online/categories/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
    
  </entry>
  
  <entry>
    <title>工作流引擎---RE</title>
    <link href="http://www.fireworm.online/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/2017/05/27/%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E-RE.html"/>
    <id>http://www.fireworm.online/流程引擎/2017/05/27/工作流引擎-RE.html</id>
    <published>2017-05-27T03:17:39.000Z</published>
    <updated>2017-05-27T03:17:39.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="部署一个流程"><a href="#部署一个流程" class="headerlink" title="部署一个流程"></a>部署一个流程</h3><p>我们部署流程引擎的时候可以选择bpmn和zip压缩后的方式:</p>
<h4 id="方式一-bpmn文件的方式部署"><a href="#方式一-bpmn文件的方式部署" class="headerlink" title="方式一:bpmn文件的方式部署"></a>方式一:bpmn文件的方式部署</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * step-one:部署流程实例</div><div class="line"> * </div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Deployment <span class="title">deploymentDefination</span><span class="params">()</span> </span>&#123;</div><div class="line">  DeploymentBuilder deploymentBuilder = processEngine.getRepositoryService().createDeployment();</div><div class="line">  deploymentBuilder.addClasspathResource(<span class="string">"coupon.bpmn"</span>);</div><div class="line">  Deployment deploy = deploymentBuilder.deploy();</div><div class="line">  <span class="keyword">return</span> deploy;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="方式二-压缩文件的格式"><a href="#方式二-压缩文件的格式" class="headerlink" title="方式二:压缩文件的格式"></a>方式二:压缩文件的格式</h4><p>controller层上传压缩文件<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 部署一个流程</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> bpmFile</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/deployments"</span>, method = RequestMethod.POST)</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">createDeployment</span><span class="params">(MultipartFile bpmFile)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> deploymentService.createDeployment(bpmFile);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>service层部署流程:<font color="red">createDeployment方法</font><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 部署一个流程bpm文件</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> bpmFile</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">createDeployment</span><span class="params">(MultipartFile bpmFile)</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">        DeploymentBuilder deploymentBuilder = repositoryService.createDeployment();</div><div class="line">        String fileName = bpmFile.getOriginalFilename();</div><div class="line">        String type = bpmFile.getContentType();</div><div class="line">    </div><div class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(fileName)) &#123;</div><div class="line">            <span class="keyword">if</span> (type.equals(<span class="string">"application/zip"</span>)) &#123;</div><div class="line">                ZipInputStream inputStream = <span class="keyword">new</span> ZipInputStream(bpmFile.getInputStream());</div><div class="line">                deploymentBuilder.addZipInputStream(inputStream);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> FlowableIllegalArgumentException(<span class="string">"流程bmp文件格式暂不支持"</span>);</div><div class="line">            &#125;</div><div class="line">    </div><div class="line">            deploymentBuilder.name(fileName).deploy();</div><div class="line">        &#125;</div><div class="line">    </div><div class="line">        result.put(<span class="string">"code"</span>, <span class="number">0</span>);</div><div class="line">        result.put(<span class="string">"message"</span>, <span class="string">"部署成功"</span>);</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> CjjClientException(ErrorCodes.ERR_DEPLOYMENT_FAILED, <span class="string">"流程部署失败，bmpFie: "</span> + bpmFile.getOriginalFilename(), e);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="查询部署的流程"><a href="#查询部署的流程" class="headerlink" title="查询部署的流程"></a>查询部署的流程</h3><p>controller层<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 查看所有已部署流程</div><div class="line"> *</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/deplyments"</span>, method = RequestMethod.GET)</div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">queryDeployments</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> deploymentService.queryDeployments();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>service层<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">queryDeployments</span><span class="params">()</span> </span>&#123;</div><div class="line">    Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    DeploymentQuery deploymentQuery = repositoryService.createDeploymentQuery();</div><div class="line"></div><div class="line">    List&lt;Deployment&gt; deploymentList = deploymentQuery.list();</div><div class="line">    List&lt;DeploymentVo&gt; deploymentVoList = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    <span class="keyword">if</span> (deploymentList != <span class="keyword">null</span> &amp;&amp; deploymentList.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">for</span> (Deployment deployment : deploymentList) &#123;</div><div class="line">            DeploymentVo deploymentVo = <span class="keyword">new</span> DeploymentVo();</div><div class="line">            deploymentVo.setId(deployment.getId());</div><div class="line">            deploymentVo.setName(deployment.getName());</div><div class="line">            deploymentVo.setCategory(deployment.getCategory());</div><div class="line">            deploymentVo.setKey(deployment.getKey());</div><div class="line">            deploymentVo.setDeploymentTime(deployment.getDeploymentTime());</div><div class="line"></div><div class="line">            deploymentVoList.add(deploymentVo);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        result.put(<span class="string">"data"</span>, deploymentVoList);</div><div class="line">    &#125;</div><div class="line">    result.put(<span class="string">"code"</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;部署一个流程&quot;&gt;&lt;a href=&quot;#部署一个流程&quot; class=&quot;headerlink&quot; title=&quot;部署一个流程&quot;&gt;&lt;/a&gt;部署一个流程&lt;/h3&gt;&lt;p&gt;我们部署流程引擎的时候可以选择bpmn和zip压缩后的方式:&lt;/p&gt;
&lt;h4 id=&quot;方式一-bpmn文件的
    
    </summary>
    
      <category term="流程引擎" scheme="http://www.fireworm.online/categories/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
    
      <category term="流程引擎" scheme="http://www.fireworm.online/tags/%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>Thinking in Java(一)一切皆对象</title>
    <link href="http://www.fireworm.online/THINKING-IN-JAVA/2017/05/23/Thinking-in-Java-%E4%B8%80-%E4%B8%80%E5%88%87%E7%9A%86%E5%AF%B9%E8%B1%A1.html"/>
    <id>http://www.fireworm.online/THINKING-IN-JAVA/2017/05/23/Thinking-in-Java-一-一切皆对象.html</id>
    <published>2017-05-23T15:30:14.000Z</published>
    <updated>2017-05-23T15:30:14.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="java的设计"><a href="#java的设计" class="headerlink" title="java的设计"></a>java的设计</h4><p>尽管java是基于C++开发的,但是java是一个纯粹的面向对象的程序设计语言;C++之所以成为一种杂合行的设计语言,是因为C++支持C语言的向后兼容,但是这种兼容却让C++变得臃肿,java是基于C++而简化了C++中比较臃肿的东西</p>
<h4 id="引用操作对象"><a href="#引用操作对象" class="headerlink" title="引用操作对象"></a>引用操作对象</h4><p>每种计算机语言都有自己操作内存元素的方式.java是面向对象的,因此java采用一个固定的方式来操作内存中的元素:</p>
<ol>
<li>java中通过引用来操作对象</li>
<li>这就好比遥控器与电视的关系,我们操作的是遥控器,再由遥控器来操作电视</li>
<li>此外,即使没有电视机遥控器也可以独立的存在,也就是说你可以有一个引用,但是不必有对象与其关联</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建一个引用,没有对象指定</span></div><div class="line">String s;</div></pre></td></tr></table></figure>
<h4 id="java中的内存模型"><a href="#java中的内存模型" class="headerlink" title="java中的内存模型"></a>java中的内存模型</h4><ol>
<li><font color="blue">寄存器:</font>寄存器是最快的存储区域,因为它位于处理器的内部.我们采用java是无法直接操作寄存器的</li>
<li><font color="blue">堆栈:</font>堆栈是位于RAM(随机访问存储器),堆栈的指针向下移动则分配新的内存,堆栈指针向上移动则释放内存,堆栈的速度仅次于寄存器;我们平时使用的对象的引用就存在于堆栈中</li>
<li><font color="blue">堆:</font>堆内存也位于RAM中,用于存储所有的java对象.当我们需要在堆栈中创建对象的时候只通过new关键字即可,当然这种方便也会带来一些额外的开销:用堆进行内存分配和清理比堆栈慢</li>
<li><font color="blue">常量寄存器:</font>我们的常量一般是存储于代码中的,这样比较安全,我们也可以选择存储在ROM(只读存储器)中</li>
<li><font color="blue">非RAM存储器:</font>如果数据完全存储于代码之外,比如流对象和持久化对象最终会被存储在磁盘或者其他的地方,这样反序列化的时候就会再次找到</li>
</ol>
<h4 id="基本数据类型的存储"><a href="#基本数据类型的存储" class="headerlink" title="基本数据类型的存储"></a>基本数据类型的存储</h4><p>java中并不是所有的变量都是通过new来进行创建的,我们对于比较小的常用的数据类型不使用new关键字创建,而是创建一个并非引用的’自动’变量,将这个变量的值直接存储于<font color="red">堆栈中</font>,这样提高了数据存储额效率</p>
<h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4><p>java中基本数据类型的大小都是固定的,这也是java夸平台原因之一</p>
<table>
<thead>
<tr>
<th>基本类型</th>
<th>大小</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean</td>
<td>-</td>
</tr>
<tr>
<td>byte</td>
<td>1</td>
</tr>
<tr>
<td>short</td>
<td>2</td>
</tr>
<tr>
<td>int</td>
<td>4</td>
</tr>
<tr>
<td>long</td>
<td>8</td>
</tr>
<tr>
<td>float</td>
<td>4</td>
</tr>
<tr>
<td>double</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>所有的数值类型都具有正负号,不要去寻求无符号的数值类型,boolean占的大小没有指定,但是只能存储true/false</p>
<h4 id="高精度数字"><a href="#高精度数字" class="headerlink" title="高精度数字"></a>高精度数字</h4><p>java提供了两种高精度的计算:BigInteger和BigDecimal,能用基本数据类型操作的都可以用包装类型进行操作,但是需要调用方法.这么做复杂了许多,当然运算速度也慢了许多,这里是利用速度换取了精度</p>
<ol>
<li>BigInteger支持任意精度的整数运算</li>
<li>BigDecimal支持任意精度的浮点型运算</li>
</ol>
<h4 id="类的描述"><a href="#类的描述" class="headerlink" title="类的描述"></a>类的描述</h4><p>我们知道java是面相对象的,并且知道用new关键字来创建对象.但是如何在开发中创建我们自定义类和对象的呢?<br>其实类由两部分组成:成员方法和成员变量,成员变量描述类所具备的属性,成员方法说明了该类具有哪些功能</p>
<h4 id="成员变量定义"><a href="#成员变量定义" class="headerlink" title="成员变量定义"></a>成员变量定义</h4><p>我们在类中定义了成员变量默认都会初始化的,但是局部变量不会默认进行初始化,所以我们在使用局部变量之前一定先给其初始化才行,负责编译器就会报错.以下是我们成员变量的默认初始化:</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>char</td>
<td>\u0000</td>
</tr>
<tr>
<td>byte</td>
<td>(byte)0</td>
</tr>
<tr>
<td>short</td>
<td>(short)0</td>
</tr>
<tr>
<td>int</td>
<td>0</td>
</tr>
<tr>
<td>long</td>
<td>0L</td>
</tr>
<tr>
<td>float</td>
<td>0.0F</td>
</tr>
<tr>
<td>double</td>
<td>0.0</td>
</tr>
</tbody>
</table>
<h4 id="static关键字"><a href="#static关键字" class="headerlink" title="static关键字"></a>static关键字</h4><p>出现需求:</p>
<ol>
<li>为某个特定的区域分配单一存储空间,而不需要考虑需要多少个对象</li>
<li>希望被static修饰的不与任何的对象所关联,只与当前的类相关</li>
</ol>
<p>下面这段代码无论有多少个StaticTest对象StaticTest.i只会有一份存储空间,N个对象共享一个i.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">calss StaticTest &#123;</div><div class="line">  <span class="keyword">static</span> <span class="keyword">int</span> i = <span class="number">47</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><font color="red">建议:</font>在静态使用中,建议使用类直接调用,而不建议使用创建对象的方式,因为这样表现层次更加的明确,说明静态是属于类的,而并非对象的.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;java的设计&quot;&gt;&lt;a href=&quot;#java的设计&quot; class=&quot;headerlink&quot; title=&quot;java的设计&quot;&gt;&lt;/a&gt;java的设计&lt;/h4&gt;&lt;p&gt;尽管java是基于C++开发的,但是java是一个纯粹的面向对象的程序设计语言;C++之所以成为一种
    
    </summary>
    
      <category term="THINKING IN JAVA" scheme="http://www.fireworm.online/categories/THINKING-IN-JAVA/"/>
    
    
      <category term="读书笔记" scheme="http://www.fireworm.online/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>join链接查询</title>
    <link href="http://www.fireworm.online/mysql/2017/05/21/join%E9%93%BE%E6%8E%A5%E6%9F%A5%E8%AF%A2.html"/>
    <id>http://www.fireworm.online/mysql/2017/05/21/join链接查询.html</id>
    <published>2017-05-21T11:27:58.000Z</published>
    <updated>2017-05-21T11:27:58.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="数据表结构"><a href="#数据表结构" class="headerlink" title="数据表结构"></a>数据表结构</h4><p>表结构一:<br><img src="http://oayt7zau6.bkt.clouddn.com/mysql_join_table1.jpg" alt="enter image description here"><br>表结构二:<br><img src="http://oayt7zau6.bkt.clouddn.com/mysql_join_table2.jpg" alt="enter image description here"></p>
<h4 id="Join从句的分类"><a href="#Join从句的分类" class="headerlink" title="Join从句的分类"></a>Join从句的分类</h4><p><img src="http://oayt7zau6.bkt.clouddn.com/mysql_join%E4%BB%8E%E5%8F%A51.jpg" alt="enter image description here"></p>
<h4 id="Inner-join"><a href="#Inner-join" class="headerlink" title="Inner join"></a>Inner join</h4><p>inner join表示将两张表进行关联起来,查询里面的交集部分<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> user2 <span class="keyword">WHERE</span> user1.username = user2.name;</div></pre></td></tr></table></figure></p>
<p>查询结果:<br>当查询*的时候是将两张表进行拼接起来<br><img src="http://oayt7zau6.bkt.clouddn.com/inner_join%E7%BB%93%E6%9E%9C1.jpg" alt="enter image description here"></p>
<h4 id="左外链接用途"><a href="#左外链接用途" class="headerlink" title="左外链接用途"></a>左外链接用途</h4><p><img src="http://oayt7zau6.bkt.clouddn.com/%E5%B7%A6%E5%A4%96%E9%93%BE%E6%8E%A51.jpg" alt="enter image description here"><br>左外链接一般查询的是左表的所有和右表所匹配的数据,匹配不上的全是null<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> user2 <span class="keyword">on</span> user1.username = user2.name</div></pre></td></tr></table></figure></p>
<p>查询结果:<br><img src="http://oayt7zau6.bkt.clouddn.com/%E5%B7%A6%E5%A4%96%E9%93%BE%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C.jpg" alt="enter image description here"><br>查询只存在于左表中的数据<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> user2 <span class="keyword">on</span> user1.username = user2.name <span class="keyword">WHERE</span> user2.name <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span></div></pre></td></tr></table></figure></p>
<p>查询结果:<br><img src="http://oayt7zau6.bkt.clouddn.com/inner_join%E7%BB%93%E6%9E%9C1.jpg" alt="enter image description here"></p>
<h4 id="右外链接"><a href="#右外链接" class="headerlink" title="右外链接"></a>右外链接</h4><p>右外链接和左外链接是相对的,只不过是以右表为基准<br><img src="http://oayt7zau6.bkt.clouddn.com/%E5%8F%B3%E5%A4%96%E9%93%BE%E6%8E%A5.jpg" alt="enter image description here"></p>
<h4 id="全连接"><a href="#全连接" class="headerlink" title="全连接"></a>全连接</h4><p>全连接表示可以查询出两个表所有的数据或两个表交集之外的数据<br><img src="http://oayt7zau6.bkt.clouddn.com/%E5%85%A8%E8%BF%9E%E6%8E%A5.jpg" alt="enter image description here"><br>代码演示:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user1  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> user2 <span class="keyword">ON</span> user1.username = user2.name <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> *  <span class="keyword">FROM</span> user1 <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> user2 <span class="keyword">ON</span> user1.username = user2.name</div></pre></td></tr></table></figure></p>
<p>查询结果:<br><img src="http://oayt7zau6.bkt.clouddn.com/%E5%85%A8%E8%BF%9E%E6%8E%A5%E7%BB%93%E6%9E%9C.jpg" alt="enter image description here"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;数据表结构&quot;&gt;&lt;a href=&quot;#数据表结构&quot; class=&quot;headerlink&quot; title=&quot;数据表结构&quot;&gt;&lt;/a&gt;数据表结构&lt;/h4&gt;&lt;p&gt;表结构一:&lt;br&gt;&lt;img src=&quot;http://oayt7zau6.bkt.clouddn.com/mysql_
    
    </summary>
    
      <category term="mysql" scheme="http://www.fireworm.online/categories/mysql/"/>
    
    
      <category term="链接查询" scheme="http://www.fireworm.online/tags/%E9%93%BE%E6%8E%A5%E6%9F%A5%E8%AF%A2/"/>
    
  </entry>
  
  <entry>
    <title>mysql数据类型</title>
    <link href="http://www.fireworm.online/mysql/2017/05/21/mysql%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html"/>
    <id>http://www.fireworm.online/mysql/2017/05/21/mysql数据类型.html</id>
    <published>2017-05-21T08:55:47.000Z</published>
    <updated>2017-05-21T08:55:47.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="mysql数据类型以及语句分类"><a href="#mysql数据类型以及语句分类" class="headerlink" title="mysql数据类型以及语句分类"></a>mysql数据类型以及语句分类</h3><p>跟学习java一样,我们在学习mysql之前需要理解mysql中的数据类型,接下来就介绍一下mysql中的几种数据类型,具体的使用哪种数据类型还需要根据当时的场景来定义</p>
<h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h4><p><img src="http://oayt7zau6.bkt.clouddn.com/mysql%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B_%E6%95%B4%E5%BD%A2.jpg" alt="enter image description here"></p>
<h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><p><img src="http://oayt7zau6.bkt.clouddn.com/mysql_%E5%8F%8C%E7%B2%BE%E5%BA%A6.jpg" alt="enter image description here"></p>
<h4 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h4><p><img src="http://oayt7zau6.bkt.clouddn.com/mysql_%E5%AD%97%E7%AC%A6%E4%B8%B2.jpg" alt="enter image description here"></p>
<h4 id="时间类型"><a href="#时间类型" class="headerlink" title="时间类型"></a>时间类型</h4><p><img src="http://oayt7zau6.bkt.clouddn.com/mysql_%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B.jpg" alt="enter image description here"></p>
<h4 id="mysql的语句分类"><a href="#mysql的语句分类" class="headerlink" title="mysql的语句分类"></a>mysql的语句分类</h4><p><img src="http://oayt7zau6.bkt.clouddn.com/sql%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%88%86%E7%B1%BB.jpg" alt="enter image description here"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;mysql数据类型以及语句分类&quot;&gt;&lt;a href=&quot;#mysql数据类型以及语句分类&quot; class=&quot;headerlink&quot; title=&quot;mysql数据类型以及语句分类&quot;&gt;&lt;/a&gt;mysql数据类型以及语句分类&lt;/h3&gt;&lt;p&gt;跟学习java一样,我们在学习mys
    
    </summary>
    
      <category term="mysql" scheme="http://www.fireworm.online/categories/mysql/"/>
    
    
      <category term="mysql基础" scheme="http://www.fireworm.online/tags/mysql%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>数组常用API</title>
    <link href="http://www.fireworm.online/javaSE/2017/05/21/%E6%95%B0%E7%BB%84%E5%B8%B8%E7%94%A8API.html"/>
    <id>http://www.fireworm.online/javaSE/2017/05/21/数组常用API.html</id>
    <published>2017-05-21T07:01:11.000Z</published>
    <updated>2017-05-21T07:01:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="数组注意事项"><a href="#数组注意事项" class="headerlink" title="数组注意事项"></a>数组注意事项</h3><p>对于数组的定义和一般使用技巧,我们肯定都是比较熟悉了.这里主要介绍一下数据的一些好用API以及注意事项</p>
<h4 id="数组的基本使用—创建数组"><a href="#数组的基本使用—创建数组" class="headerlink" title="数组的基本使用—创建数组"></a>数组的基本使用—创建数组</h4><ul>
<li>当创建一个数字型的数组时,所有元素都初始化为0</li>
<li>当创建boolean类型的数组时,所有元素都初始化为false</li>
<li>当创建一个对象数组时,所有元素都初始化为null,例如:<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建一个包含十个字符串的数组,但是每一个的初始化字符串都是null</span></div><div class="line">String[] str = <span class="keyword">new</span> String[<span class="number">10</span>]</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="数组工具类常用API—Arrays"><a href="#数组工具类常用API—Arrays" class="headerlink" title="数组工具类常用API—Arrays"></a>数组工具类常用API—Arrays</h4><p><font color="blue">static <t> T[] copyOf(T[] original, int newLength) </t></font>—将original数组拷贝newLength个到一个新的数组中,方法的返回值是一个新的数组</p>
<p><font color="blue">static void sort(type[] a)</font>—将数组进行排序,使用的是快排,效率比较高</p>
<p><font color="blue">static int binarySearch(type[] a, type key)</font>—在数组a中进行二分查找key,如果查找成功则返回下标值,否则返回一个负数</p>
<p><font color="blue">static void fill(type[] a, type v)</font>—将数组的所有数据元素赋值为v</p>
<p><font color="blue">boolean equals(type[] a, type[] b)</font>—如果两个数组大小相同,并且下标相同的元素都相同返回true,否则返回false</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;数组注意事项&quot;&gt;&lt;a href=&quot;#数组注意事项&quot; class=&quot;headerlink&quot; title=&quot;数组注意事项&quot;&gt;&lt;/a&gt;数组注意事项&lt;/h3&gt;&lt;p&gt;对于数组的定义和一般使用技巧,我们肯定都是比较熟悉了.这里主要介绍一下数据的一些好用API以及注意事项&lt;/p
    
    </summary>
    
      <category term="javaSE" scheme="http://www.fireworm.online/categories/javaSE/"/>
    
    
      <category term="集合体系" scheme="http://www.fireworm.online/tags/%E9%9B%86%E5%90%88%E4%BD%93%E7%B3%BB/"/>
    
  </entry>
  
  <entry>
    <title>BigDecimal</title>
    <link href="http://www.fireworm.online/javaSE/2017/05/21/BigDecimal.html"/>
    <id>http://www.fireworm.online/javaSE/2017/05/21/BigDecimal.html</id>
    <published>2017-05-21T04:00:33.000Z</published>
    <updated>2017-05-21T04:00:33.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="大数据类型BigDecimal与Double"><a href="#大数据类型BigDecimal与Double" class="headerlink" title="大数据类型BigDecimal与Double"></a>大数据类型BigDecimal与Double</h3><p>我们知道在浮点类型做运算的时候存在损失精度的问题,这是因为计算机底层是以二进制的方式存储数据的,所以我们在和金钱打交道的时候就应该避免采用Double,而应该用大数据类型BigDecimal.</p>
<h3 id="BigDecimal与Double的实验"><a href="#BigDecimal与Double的实验" class="headerlink" title="BigDecimal与Double的实验"></a>BigDecimal与Double的实验</h3><h4 id="分别采用两种方式计算两个小数的加法运算"><a href="#分别采用两种方式计算两个小数的加法运算" class="headerlink" title="分别采用两种方式计算两个小数的加法运算:"></a>分别采用两种方式计算两个小数的加法运算:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testNaN</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">int</span> num1 = <span class="number">10</span>;</div><div class="line">  <span class="keyword">float</span> num2 = <span class="number">10.1F</span>;</div><div class="line">  <span class="keyword">double</span> num3 = <span class="number">10.2</span>;</div><div class="line"></div><div class="line">  BigDecimal add1 = BigDecimal.valueOf(<span class="number">10.1</span>).add(BigDecimal.valueOf(<span class="number">10.2</span>));</div><div class="line">  BigDecimal add2 = <span class="keyword">new</span> BigDecimal(<span class="string">"10.1"</span>).add(<span class="keyword">new</span> BigDecimal(<span class="string">"10.2"</span>));</div><div class="line">  BigDecimal add3 = BigDecimal.valueOf(num2).add(BigDecimal.valueOf(num3));</div><div class="line">  Double add4 = num3 + num2;</div><div class="line">  System.out.println(add1 + <span class="string">"****"</span> + add2 + <span class="string">"****"</span> + add3 + <span class="string">"****"</span> + add4);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="执行结果"><a href="#执行结果" class="headerlink" title="执行结果"></a>执行结果</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">20.3</span>****<span class="number">20.3</span>****<span class="number">20.300000381469727</span>****<span class="number">20.300000381469726</span></div></pre></td></tr></table></figure>
<h4 id="得出结论"><a href="#得出结论" class="headerlink" title="得出结论"></a>得出结论</h4><p>浮点型的运算会存在误差问题,所以我们需要进行小数精确运算的时候应该采用BigDecimal,BigDecimal实现了任意精度的浮点型运算,保证了运算的正确性</p>
<h4 id="使用心得"><a href="#使用心得" class="headerlink" title="使用心得"></a>使用心得</h4><p>我们在使用BigDecimal的时候应该采用构造方法,传入字符串的形式进行加减乘除计算</p>
<h4 id="API的使用"><a href="#API的使用" class="headerlink" title="API的使用"></a>API的使用</h4><p><font color="blue">add(other) </font>— 和</p>
<p><font color="blue">subtract(other) </font>— 差</p>
<p><font color="blue">multiply(other)</font> — 积</p>
<p><font color="blue">divid(other)</font> — 商</p>
<p><font color="blue">mod(oher) </font>— 余</p>
<p><font color="blue">int compareTo(other) </font>— 比较两个数,如果相等返回0,如果小于other返回负数,如多大于other返回正数</p>
<p><font color="blue">valueOf(other)</font> — 将基数值转换为大数据类型</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;大数据类型BigDecimal与Double&quot;&gt;&lt;a href=&quot;#大数据类型BigDecimal与Double&quot; class=&quot;headerlink&quot; title=&quot;大数据类型BigDecimal与Double&quot;&gt;&lt;/a&gt;大数据类型BigDecimal与Doub
    
    </summary>
    
      <category term="javaSE" scheme="http://www.fireworm.online/categories/javaSE/"/>
    
    
      <category term="BigDecimal数据类型" scheme="http://www.fireworm.online/tags/BigDecimal%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>List集合切割工具类</title>
    <link href="http://www.fireworm.online/%E5%B7%A5%E5%85%B7%E7%B1%BB/2017/05/15/List%E9%9B%86%E5%90%88%E5%88%87%E5%89%B2%E5%B7%A5%E5%85%B7%E7%B1%BB.html"/>
    <id>http://www.fireworm.online/工具类/2017/05/15/List集合切割工具类.html</id>
    <published>2017-05-15T14:55:00.000Z</published>
    <updated>2017-05-15T14:55:00.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h4><p>我们在处理List集合的时候难免会遇到集合的size比较大,这时候我们就需要将一个比较大的list集合拆分成几个size比较小的集合进型处理,这样操作主要是考虑到了性能的问题,所以以下的工具类是针对于一个大的List集合进行拆分的过程</p>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 切割List集合,将其分成等分的</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> source</div><div class="line"> * <span class="doctag">@param</span> pageSize</div><div class="line"> * <span class="doctag">@return</span></div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;List&lt;T&gt;&gt; splitList(List&lt;T&gt; source, Integer pageSize) &#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">null</span> == source || source.size() == <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">int</span> size = source.size();</div><div class="line">  <span class="keyword">int</span> num = size / pageSize + <span class="number">1</span>;</div><div class="line"></div><div class="line">  <span class="comment">// 切割list集合</span></div><div class="line">  List&lt;List&lt;T&gt;&gt; target = <span class="keyword">new</span> ArrayList&lt;List&lt;T&gt;&gt;();</div><div class="line">  List&lt;T&gt; subList = <span class="keyword">null</span>;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</div><div class="line">    <span class="keyword">int</span> from = i * pageSize;</div><div class="line">    <span class="comment">//如果不是最后一个集合</span></div><div class="line">    <span class="keyword">if</span> (i != num - <span class="number">1</span>) &#123;</div><div class="line">      subList = source.subList(from, from + pageSize);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        subList = source.subList(from, from + size % pageSize);</div><div class="line">    &#125;</div><div class="line">    target.add(subList);</div><div class="line">  &#125;</div><div class="line">    <span class="keyword">return</span> target;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="代码理解"><a href="#代码理解" class="headerlink" title="代码理解"></a>代码理解</h4><ol>
<li>num:表示大集合将要被切割的个数</li>
<li>pageSize表示每个小集合的size</li>
<li>subList = source.subList(from, from + pageSize):如果不是最后一个集合,我们需要切割from 到from + pageSize个</li>
<li>subList = source.subList(from, from + size % pageSize): 如果切割刀最后一个集合的时候,我们需要从from切割到from + size的余数(size % pageSize)</li>
</ol>
<h4 id="功能测试"><a href="#功能测试" class="headerlink" title="功能测试"></a>功能测试</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">    list.add(<span class="number">1</span>);</div><div class="line">    list.add(<span class="number">2</span>);</div><div class="line">    list.add(<span class="number">3</span>);</div><div class="line">    list.add(<span class="number">4</span>);</div><div class="line">    list.add(<span class="number">5</span>);</div><div class="line">    list.add(<span class="number">5</span>);</div><div class="line">    list.add(<span class="number">6</span>);</div><div class="line"></div><div class="line">    List&lt;List&lt;Integer&gt;&gt; splitList = splitList(list, <span class="number">2</span>);</div><div class="line">    System.out.println(splitList);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="测试运行结果"><a href="#测试运行结果" class="headerlink" title="测试运行结果"></a>测试运行结果</h4><p>[[1, 2], [3, 4], [5, 5], [6]]</p>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;问题背景&quot;&gt;&lt;a href=&quot;#问题背景&quot; class=&quot;headerlink&quot; title=&quot;问题背景&quot;&gt;&lt;/a&gt;问题背景&lt;/h4&gt;&lt;p&gt;我们在处理List集合的时候难免会遇到集合的size比较大,这时候我们就需要将一个比较大的list集合拆分成几个size比较
    
    </summary>
    
      <category term="工具类" scheme="http://www.fireworm.online/categories/%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
    
    
      <category term="集合体系" scheme="http://www.fireworm.online/tags/%E9%9B%86%E5%90%88%E4%BD%93%E7%B3%BB/"/>
    
  </entry>
  
</feed>
